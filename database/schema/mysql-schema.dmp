/*!999999\- enable the sandbox mode */
-- MariaDB dump 10.19  Distrib 10.6.18-MariaDB, for debian-linux-gnu (x86_64)
--
-- Host: 127.0.0.1    Database: lunar
-- ------------------------------------------------------
-- Server version	10.6.18-MariaDB-0ubuntu0.22.04.1

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `addresses`
--

DROP TABLE IF EXISTS `addresses`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `addresses` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `type` enum('billing','business','contract','mailing','pickup','residential','shipping','') DEFAULT NULL,
  `name` varchar(191) NOT NULL,
  `company_name` varchar(191) DEFAULT NULL,
  `firstname` varchar(191) DEFAULT NULL,
  `lastname` varchar(191) DEFAULT NULL,
  `country_id` char(2) NOT NULL,
  `province_id` int(10) unsigned DEFAULT NULL,
  `postalcode` varchar(12) DEFAULT NULL,
  `city` varchar(191) DEFAULT NULL,
  `address` varchar(384) NOT NULL,
  `address2` varchar(191) DEFAULT NULL,
  `phone` varchar(191) DEFAULT NULL,
  `email` varchar(191) DEFAULT NULL,
  `tax_nr` varchar(191) DEFAULT NULL,
  `registration_nr` varchar(191) DEFAULT NULL,
  `access_code` varchar(191) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  `model_type` varchar(191) DEFAULT NULL,
  `model_id` bigint(20) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `addresses_country_id_foreign` (`country_id`),
  KEY `addresses_created_by_foreign` (`created_by`),
  KEY `addresses_model_type_model_id_index` (`model_type`,`model_id`),
  CONSTRAINT `addresses_country_id_foreign` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`),
  CONSTRAINT `addresses_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `adjustments`
--

DROP TABLE IF EXISTS `adjustments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `adjustments` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `type` varchar(191) NOT NULL,
  `adjustable_type` varchar(191) NOT NULL,
  `adjustable_id` bigint(20) unsigned NOT NULL,
  `adjuster` varchar(191) NOT NULL,
  `origin` varchar(191) DEFAULT NULL,
  `data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`data`)),
  `title` varchar(191) NOT NULL,
  `description` varchar(191) DEFAULT NULL,
  `amount` decimal(15,4) NOT NULL DEFAULT 0.0000,
  `is_locked` tinyint(1) NOT NULL DEFAULT 0,
  `is_included` tinyint(1) NOT NULL DEFAULT 0,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `adjustments_created_by_foreign` (`created_by`),
  CONSTRAINT `adjustments_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `am_alerts`
--

DROP TABLE IF EXISTS `am_alerts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `am_alerts` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `port_id` bigint(20) unsigned NOT NULL,
  `type` varchar(191) NOT NULL,
  `vulnerability` varchar(5000) DEFAULT NULL,
  `remediation` varchar(5000) DEFAULT NULL,
  `level` varchar(191) DEFAULT NULL,
  `uid` varchar(191) DEFAULT NULL,
  `cve_id` varchar(191) DEFAULT NULL,
  `cve_cvss` varchar(191) DEFAULT NULL,
  `cve_vendor` varchar(191) DEFAULT NULL,
  `cve_product` varchar(191) DEFAULT NULL,
  `title` varchar(191) DEFAULT NULL,
  `flarum_slug` varchar(191) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `am_alerts_level_index` (`level`),
  KEY `am_alerts_port_id_foreign` (`port_id`),
  CONSTRAINT `am_alerts_port_id_foreign` FOREIGN KEY (`port_id`) REFERENCES `am_ports` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `am_assets`
--

DROP TABLE IF EXISTS `am_assets`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `am_assets` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `asset` varchar(191) NOT NULL,
  `type` enum('DNS','IP','RANGE') NOT NULL,
  `tld` varchar(191) DEFAULT NULL,
  `discovery_id` varchar(191) DEFAULT NULL,
  `prev_scan_id` varchar(191) DEFAULT NULL,
  `cur_scan_id` varchar(191) DEFAULT NULL,
  `next_scan_id` varchar(191) DEFAULT NULL,
  `is_monitored` tinyint(1) NOT NULL DEFAULT 0,
  `created_by` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `am_assets_prev_scan_id_foreign` (`prev_scan_id`),
  KEY `am_assets_cur_scan_id_foreign` (`cur_scan_id`),
  KEY `am_assets_next_scan_id_foreign` (`next_scan_id`),
  KEY `am_assets_created_by_index` (`created_by`),
  CONSTRAINT `am_assets_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `am_assets_cur_scan_id_foreign` FOREIGN KEY (`cur_scan_id`) REFERENCES `am_scans` (`ports_scan_id`) ON DELETE SET NULL,
  CONSTRAINT `am_assets_next_scan_id_foreign` FOREIGN KEY (`next_scan_id`) REFERENCES `am_scans` (`ports_scan_id`) ON DELETE SET NULL,
  CONSTRAINT `am_assets_prev_scan_id_foreign` FOREIGN KEY (`prev_scan_id`) REFERENCES `am_scans` (`ports_scan_id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `am_assets_tags`
--

DROP TABLE IF EXISTS `am_assets_tags`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `am_assets_tags` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `asset_id` bigint(20) unsigned NOT NULL,
  `tag` varchar(191) NOT NULL,
  `created_by` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `am_assets_tags_asset_id_foreign` (`asset_id`),
  KEY `am_assets_tags_tag_index` (`tag`),
  KEY `am_assets_tags_created_by_foreign` (`created_by`),
  CONSTRAINT `am_assets_tags_asset_id_foreign` FOREIGN KEY (`asset_id`) REFERENCES `am_assets` (`id`) ON DELETE CASCADE,
  CONSTRAINT `am_assets_tags_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `am_assets_tags_hashes`
--

DROP TABLE IF EXISTS `am_assets_tags_hashes`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `am_assets_tags_hashes` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `hash` varchar(191) NOT NULL,
  `views` int(11) NOT NULL DEFAULT 0,
  `tag` varchar(191) NOT NULL,
  `created_by` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `am_assets_tags_hashes_hash_unique` (`hash`),
  UNIQUE KEY `am_assets_tags_hashes_tag_unique` (`tag`),
  KEY `am_assets_tags_hashes_created_by_foreign` (`created_by`),
  CONSTRAINT `am_assets_tags_hashes_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `am_assets_tags_hashes_tag_foreign` FOREIGN KEY (`tag`) REFERENCES `am_assets_tags` (`tag`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `am_attackers`
--

DROP TABLE IF EXISTS `am_attackers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `am_attackers` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `name` varchar(191) NOT NULL,
  `first_contact` datetime NOT NULL,
  `last_contact` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `am_hidden_alerts`
--

DROP TABLE IF EXISTS `am_hidden_alerts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `am_hidden_alerts` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `uid` varchar(191) DEFAULT NULL,
  `type` varchar(191) DEFAULT NULL,
  `title` varchar(191) DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `am_hidden_alerts_created_by_foreign` (`created_by`),
  CONSTRAINT `am_hidden_alerts_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `am_honeypots`
--

DROP TABLE IF EXISTS `am_honeypots`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `am_honeypots` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `dns` varchar(191) NOT NULL,
  `status` enum('dns_setup','honeypot_setup','setup_complete') DEFAULT NULL,
  `cloud_provider` enum('AWS','AZURE','GCP') NOT NULL,
  `cloud_sensor` enum('HTTP','HTTPS','SSH') NOT NULL,
  `created_by` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `am_honeypots_created_by_foreign` (`created_by`),
  CONSTRAINT `am_honeypots_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `am_honeypots_events`
--

DROP TABLE IF EXISTS `am_honeypots_events`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `am_honeypots_events` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `honeypot_id` bigint(20) unsigned NOT NULL,
  `attacker_id` bigint(20) unsigned DEFAULT NULL,
  `event` varchar(191) NOT NULL,
  `uid` varchar(191) NOT NULL,
  `human` tinyint(1) NOT NULL DEFAULT 0,
  `endpoint` varchar(191) NOT NULL,
  `timestamp` datetime NOT NULL,
  `request_uri` varchar(191) NOT NULL,
  `user_agent` varchar(191) NOT NULL,
  `ip` varchar(191) NOT NULL,
  `details` varchar(191) NOT NULL,
  `targeted` tinyint(1) NOT NULL DEFAULT 0,
  `feed_name` varchar(191) NOT NULL,
  `hosting_service_description` varchar(191) DEFAULT NULL,
  `hosting_service_registry` varchar(191) DEFAULT NULL,
  `hosting_service_asn` varchar(191) DEFAULT NULL,
  `hosting_service_cidr` varchar(191) DEFAULT NULL,
  `hosting_service_country_code` varchar(191) DEFAULT NULL,
  `hosting_service_date` varchar(191) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `am_honeypots_events_honeypot_id_foreign` (`honeypot_id`),
  KEY `am_honeypots_events_attacker_id_foreign` (`attacker_id`),
  CONSTRAINT `am_honeypots_events_attacker_id_foreign` FOREIGN KEY (`attacker_id`) REFERENCES `am_attackers` (`id`) ON DELETE SET NULL,
  CONSTRAINT `am_honeypots_events_honeypot_id_foreign` FOREIGN KEY (`honeypot_id`) REFERENCES `am_honeypots` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `am_ports`
--

DROP TABLE IF EXISTS `am_ports`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `am_ports` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `scan_id` bigint(20) unsigned NOT NULL,
  `hostname` varchar(191) NOT NULL,
  `ip` varchar(191) NOT NULL,
  `port` int(11) NOT NULL,
  `protocol` varchar(191) NOT NULL,
  `country` varchar(191) DEFAULT NULL,
  `hosting_service_description` varchar(191) DEFAULT NULL,
  `hosting_service_registry` varchar(191) DEFAULT NULL,
  `hosting_service_asn` varchar(191) DEFAULT NULL,
  `hosting_service_cidr` varchar(191) DEFAULT NULL,
  `hosting_service_country_code` varchar(191) DEFAULT NULL,
  `hosting_service_date` varchar(191) DEFAULT NULL,
  `service` varchar(191) DEFAULT NULL,
  `product` varchar(191) DEFAULT NULL,
  `ssl` tinyint(1) DEFAULT NULL,
  `closed` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY `am_ports_scan_id_unique` (`scan_id`),
  KEY `am_ports_ip_index` (`ip`),
  CONSTRAINT `am_ports_scan_id_foreign` FOREIGN KEY (`scan_id`) REFERENCES `am_scans` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=33 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `am_ports_tags`
--

DROP TABLE IF EXISTS `am_ports_tags`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `am_ports_tags` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `port_id` bigint(20) unsigned NOT NULL,
  `tag` varchar(191) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `am_ports_tags_port_id_foreign` (`port_id`),
  CONSTRAINT `am_ports_tags_port_id_foreign` FOREIGN KEY (`port_id`) REFERENCES `am_ports` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=183 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `am_scans`
--

DROP TABLE IF EXISTS `am_scans`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `am_scans` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `ports_scan_id` varchar(191) DEFAULT NULL,
  `vulns_scan_id` varchar(191) DEFAULT NULL,
  `ports_scan_begins_at` timestamp NULL DEFAULT NULL,
  `ports_scan_ends_at` timestamp NULL DEFAULT NULL,
  `vulns_scan_begins_at` timestamp NULL DEFAULT NULL,
  `vulns_scan_ends_at` timestamp NULL DEFAULT NULL,
  `asset_id` bigint(20) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `am_scans_asset_id_foreign` (`asset_id`),
  KEY `am_scans_ports_scan_id_index` (`ports_scan_id`),
  CONSTRAINT `am_scans_asset_id_foreign` FOREIGN KEY (`asset_id`) REFERENCES `am_assets` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=36 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `am_screenshots`
--

DROP TABLE IF EXISTS `am_screenshots`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `am_screenshots` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `png` longtext NOT NULL,
  `port_id` bigint(20) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `am_screenshots_port_id_unique` (`port_id`),
  CONSTRAINT `am_screenshots_port_id_foreign` FOREIGN KEY (`port_id`) REFERENCES `am_ports` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `billpayers`
--

DROP TABLE IF EXISTS `billpayers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `billpayers` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `email` varchar(191) DEFAULT NULL,
  `phone` varchar(22) DEFAULT NULL,
  `firstname` varchar(191) DEFAULT NULL COMMENT 'First name',
  `lastname` varchar(191) DEFAULT NULL COMMENT 'Last name',
  `company_name` varchar(191) DEFAULT NULL,
  `tax_nr` varchar(17) DEFAULT NULL COMMENT 'Tax/VAT Identification Number',
  `registration_nr` varchar(191) DEFAULT NULL COMMENT 'Company/Trade Registration Number',
  `is_eu_registered` tinyint(1) NOT NULL DEFAULT 0,
  `is_organization` tinyint(1) NOT NULL DEFAULT 0,
  `address_id` int(10) unsigned NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `billpayers_address_id_foreign` (`address_id`),
  KEY `billpayers_created_by_foreign` (`created_by`),
  CONSTRAINT `billpayers_address_id_foreign` FOREIGN KEY (`address_id`) REFERENCES `addresses` (`id`),
  CONSTRAINT `billpayers_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cache`
--

DROP TABLE IF EXISTS `cache`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cache` (
  `key` varchar(191) NOT NULL,
  `value` mediumtext NOT NULL,
  `expiration` int(11) NOT NULL,
  PRIMARY KEY (`key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cache_locks`
--

DROP TABLE IF EXISTS `cache_locks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cache_locks` (
  `key` varchar(191) NOT NULL,
  `owner` varchar(191) NOT NULL,
  `expiration` int(11) NOT NULL,
  PRIMARY KEY (`key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `carriers`
--

DROP TABLE IF EXISTS `carriers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `carriers` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT 1,
  `configuration` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`configuration`)),
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `carriers_created_by_foreign` (`created_by`),
  CONSTRAINT `carriers_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cart_items`
--

DROP TABLE IF EXISTS `cart_items`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cart_items` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `cart_id` int(10) unsigned NOT NULL,
  `product_type` varchar(191) NOT NULL,
  `product_id` int(10) unsigned NOT NULL,
  `quantity` int(10) unsigned NOT NULL,
  `price` decimal(15,4) NOT NULL,
  `configuration` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`configuration`)),
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `cart_items_created_by_foreign` (`created_by`),
  CONSTRAINT `cart_items_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=216 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `carts`
--

DROP TABLE IF EXISTS `carts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `carts` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(10) unsigned DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `state` varchar(191) NOT NULL DEFAULT 'active',
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `carts_created_by_foreign` (`created_by`),
  CONSTRAINT `carts_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cb_chunks`
--

DROP TABLE IF EXISTS `cb_chunks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cb_chunks` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `collection_id` bigint(20) unsigned NOT NULL,
  `url` varchar(191) DEFAULT NULL,
  `page` int(11) DEFAULT NULL,
  `text` varchar(5000) NOT NULL,
  `is_embedded` tinyint(1) NOT NULL DEFAULT 0,
  `is_deleted` tinyint(1) NOT NULL DEFAULT 0,
  `file_id` bigint(20) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `cb_chunks_created_by_foreign` (`created_by`),
  KEY `cb_chunks_collection_id_foreign` (`collection_id`),
  CONSTRAINT `cb_chunks_collection_id_foreign` FOREIGN KEY (`collection_id`) REFERENCES `cb_collections` (`id`) ON DELETE CASCADE,
  CONSTRAINT `cb_chunks_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4354 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cb_chunks_tags`
--

DROP TABLE IF EXISTS `cb_chunks_tags`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cb_chunks_tags` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `chunk_id` bigint(20) unsigned NOT NULL,
  `tag` varchar(191) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `cb_chunks_tags_created_by_foreign` (`created_by`),
  KEY `cb_chunks_tags_chunk_id_foreign` (`chunk_id`),
  CONSTRAINT `cb_chunks_tags_chunk_id_foreign` FOREIGN KEY (`chunk_id`) REFERENCES `cb_chunks` (`id`) ON DELETE CASCADE,
  CONSTRAINT `cb_chunks_tags_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=10181 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cb_collections`
--

DROP TABLE IF EXISTS `cb_collections`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cb_collections` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `name` varchar(191) NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT 0,
  `priority` int(11) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `cb_chunks_collections_created_by_foreign` (`created_by`),
  CONSTRAINT `cb_chunks_collections_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=27 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cb_conversations`
--

DROP TABLE IF EXISTS `cb_conversations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cb_conversations` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `thread_id` varchar(191) NOT NULL,
  `dom` text NOT NULL,
  `autosaved` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `cb_conversations_created_by_foreign` (`created_by`),
  KEY `cb_conversations_thread_id_index` (`thread_id`),
  CONSTRAINT `cb_conversations_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cb_files`
--

DROP TABLE IF EXISTS `cb_files`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cb_files` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `collection_id` bigint(20) unsigned NOT NULL,
  `name` varchar(191) NOT NULL,
  `name_normalized` varchar(191) NOT NULL,
  `extension` varchar(191) NOT NULL,
  `path` varchar(191) NOT NULL,
  `size` int(11) NOT NULL,
  `md5` varchar(191) NOT NULL,
  `sha1` varchar(191) NOT NULL,
  `mime_type` varchar(191) NOT NULL,
  `secret` varchar(191) NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT 0,
  `is_embedded` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY `cb_files_secret_unique` (`secret`),
  KEY `cb_files_created_by_foreign` (`created_by`),
  KEY `cb_files_collection_id_foreign` (`collection_id`),
  CONSTRAINT `cb_files_collection_id_foreign` FOREIGN KEY (`collection_id`) REFERENCES `cb_collections` (`id`) ON DELETE CASCADE,
  CONSTRAINT `cb_files_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=71 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cb_prompts`
--

DROP TABLE IF EXISTS `cb_prompts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cb_prompts` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `name` varchar(191) NOT NULL,
  `template` varchar(5000) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `cb_prompts_created_by_index` (`created_by`),
  CONSTRAINT `cb_prompts_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `cb_templates`
--

DROP TABLE IF EXISTS `cb_templates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `cb_templates` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `name` varchar(191) NOT NULL,
  `template` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`template`)),
  `readonly` tinyint(1) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  UNIQUE KEY `cb_templates_name_unique` (`name`),
  KEY `cb_templates_created_by_foreign` (`created_by`),
  CONSTRAINT `cb_templates_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=67 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `channelables`
--

DROP TABLE IF EXISTS `channelables`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `channelables` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `channel_id` int(10) unsigned NOT NULL,
  `channelable_type` varchar(191) NOT NULL,
  `channelable_id` bigint(20) unsigned NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `channelables_channel_id_foreign` (`channel_id`),
  CONSTRAINT `channelables_channel_id_foreign` FOREIGN KEY (`channel_id`) REFERENCES `channels` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `channels`
--

DROP TABLE IF EXISTS `channels`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `channels` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `slug` varchar(191) DEFAULT NULL,
  `currency` char(3) DEFAULT NULL,
  `configuration` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`configuration`)),
  `deleted_at` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `language` char(2) NOT NULL DEFAULT 'en' COMMENT 'The two letter ISO 639-1 language code',
  `domain` varchar(255) DEFAULT NULL,
  `billing_company` varchar(255) DEFAULT NULL,
  `billing_country_id` char(2) DEFAULT NULL,
  `billing_province_id` int(10) unsigned DEFAULT NULL,
  `billing_postalcode` varchar(12) DEFAULT NULL,
  `billing_city` varchar(191) DEFAULT NULL,
  `billing_address` varchar(384) DEFAULT NULL,
  `billing_address2` varchar(255) DEFAULT NULL,
  `billing_tax_nr` varchar(17) DEFAULT NULL,
  `billing_registration_nr` varchar(191) DEFAULT NULL,
  `email` varchar(191) DEFAULT NULL,
  `phone` varchar(22) DEFAULT NULL,
  `color` char(7) NOT NULL DEFAULT '#777777',
  `theme` varchar(191) DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  `billing_zone_id` bigint(20) unsigned DEFAULT NULL,
  `shipping_zone_id` bigint(20) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `channels_slug_unique` (`slug`),
  UNIQUE KEY `channels_domain_unique` (`domain`),
  KEY `channels_created_by_foreign` (`created_by`),
  KEY `channels_billing_zone_id_foreign` (`billing_zone_id`),
  KEY `channels_shipping_zone_id_foreign` (`shipping_zone_id`),
  CONSTRAINT `channels_billing_zone_id_foreign` FOREIGN KEY (`billing_zone_id`) REFERENCES `zones` (`id`),
  CONSTRAINT `channels_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `channels_shipping_zone_id_foreign` FOREIGN KEY (`shipping_zone_id`) REFERENCES `zones` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `countries`
--

DROP TABLE IF EXISTS `countries`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `countries` (
  `id` char(2) NOT NULL,
  `name` varchar(191) NOT NULL,
  `phonecode` int(11) NOT NULL,
  `is_eu_member` tinyint(1) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `customers`
--

DROP TABLE IF EXISTS `customers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `customers` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `type` varchar(24) NOT NULL DEFAULT 'organization',
  `email` varchar(191) DEFAULT NULL,
  `phone` varchar(22) DEFAULT NULL,
  `firstname` varchar(191) DEFAULT NULL COMMENT 'First name',
  `lastname` varchar(191) DEFAULT NULL COMMENT 'Last name',
  `company_name` varchar(191) DEFAULT NULL,
  `tax_nr` varchar(17) DEFAULT NULL COMMENT 'Tax/VAT Identification Number',
  `registration_nr` varchar(191) DEFAULT NULL COMMENT 'Company/Trade Registration Number',
  `currency` varchar(3) DEFAULT NULL,
  `timezone` varchar(191) DEFAULT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT 1,
  `ltv` decimal(15,4) NOT NULL DEFAULT 0.0000 COMMENT 'Customer Lifetime Value',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `last_purchase_at` datetime DEFAULT NULL,
  `default_billing_address_id` int(10) unsigned DEFAULT NULL,
  `default_shipping_address_id` int(10) unsigned DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `customers_default_billing_address_id_foreign` (`default_billing_address_id`),
  KEY `customers_default_shipping_address_id_foreign` (`default_shipping_address_id`),
  KEY `customers_created_by_foreign` (`created_by`),
  CONSTRAINT `customers_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `customers_default_billing_address_id_foreign` FOREIGN KEY (`default_billing_address_id`) REFERENCES `addresses` (`id`) ON DELETE SET NULL,
  CONSTRAINT `customers_default_shipping_address_id_foreign` FOREIGN KEY (`default_shipping_address_id`) REFERENCES `addresses` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `f_collections`
--

DROP TABLE IF EXISTS `f_collections`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `f_collections` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `name` varchar(191) NOT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  UNIQUE KEY `f_collections_name_unique` (`name`),
  KEY `f_collections_created_by_foreign` (`created_by`),
  CONSTRAINT `f_collections_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `f_csv_files`
--

DROP TABLE IF EXISTS `f_csv_files`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `f_csv_files` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `collection_id` int(10) unsigned NOT NULL,
  `name` varchar(191) NOT NULL,
  `name_normalized` varchar(191) NOT NULL,
  `extension` varchar(191) NOT NULL,
  `path` varchar(191) NOT NULL,
  `size` int(11) NOT NULL,
  `md5` varchar(191) NOT NULL,
  `sha1` varchar(191) NOT NULL,
  `mime_type` varchar(191) NOT NULL,
  `secret` varchar(191) NOT NULL,
  `has_headers` tinyint(1) NOT NULL DEFAULT 0,
  `column_mapping` text DEFAULT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `f_csv_files_created_by_foreign` (`created_by`),
  KEY `f_csv_files_collection_id_foreign` (`collection_id`),
  CONSTRAINT `f_csv_files_collection_id_foreign` FOREIGN KEY (`collection_id`) REFERENCES `f_collections` (`id`) ON DELETE CASCADE,
  CONSTRAINT `f_csv_files_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `f_csv_rows`
--

DROP TABLE IF EXISTS `f_csv_rows`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `f_csv_rows` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `collection_id` int(10) unsigned NOT NULL,
  `csv_file_id` int(10) unsigned NOT NULL,
  `contents` text NOT NULL,
  `imported_at` datetime DEFAULT NULL,
  `warned_at` datetime DEFAULT NULL,
  `failed_at` datetime DEFAULT NULL,
  `is_deleted` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `f_csv_rows_created_by_foreign` (`created_by`),
  KEY `f_csv_rows_collection_id_foreign` (`collection_id`),
  KEY `f_csv_rows_csv_file_id_index` (`csv_file_id`),
  CONSTRAINT `f_csv_rows_collection_id_foreign` FOREIGN KEY (`collection_id`) REFERENCES `f_collections` (`id`) ON DELETE CASCADE,
  CONSTRAINT `f_csv_rows_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `f_csv_rows_csv_file_id_foreign` FOREIGN KEY (`csv_file_id`) REFERENCES `f_csv_files` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `failed_jobs`
--

DROP TABLE IF EXISTS `failed_jobs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `failed_jobs` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `uuid` varchar(191) NOT NULL,
  `connection` text NOT NULL,
  `queue` text NOT NULL,
  `payload` longtext NOT NULL,
  `exception` longtext NOT NULL,
  `failed_at` timestamp NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (`id`),
  UNIQUE KEY `failed_jobs_uuid_unique` (`uuid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `invitations`
--

DROP TABLE IF EXISTS `invitations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `invitations` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(10) unsigned DEFAULT NULL,
  `name` varchar(191) DEFAULT NULL,
  `email` varchar(191) NOT NULL,
  `hash` varchar(191) NOT NULL,
  `type` varchar(191) NOT NULL,
  `options` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`options`)),
  `expires_at` timestamp NULL DEFAULT NULL,
  `utilized_at` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `invitations_email_unique` (`email`),
  KEY `invitations_user_id_foreign` (`user_id`),
  KEY `invitations_created_by_foreign` (`created_by`),
  CONSTRAINT `invitations_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `invitations_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=117 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `jobs`
--

DROP TABLE IF EXISTS `jobs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `jobs` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `queue` varchar(191) NOT NULL,
  `payload` longtext NOT NULL,
  `attempts` tinyint(3) unsigned NOT NULL,
  `reserved_at` int(10) unsigned DEFAULT NULL,
  `available_at` int(10) unsigned NOT NULL,
  `created_at` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `jobs_queue_index` (`queue`)
) ENGINE=InnoDB AUTO_INCREMENT=245134 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `languages`
--

DROP TABLE IF EXISTS `languages`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `languages` (
  `id` char(2) NOT NULL,
  `name` varchar(191) NOT NULL,
  `native_name` varchar(191) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `link_group_items`
--

DROP TABLE IF EXISTS `link_group_items`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `link_group_items` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `link_group_id` bigint(20) unsigned NOT NULL,
  `linkable_id` bigint(20) unsigned NOT NULL,
  `linkable_type` varchar(191) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `link_group_items_link_group_id_linkable_id_linkable_type_unique` (`link_group_id`,`linkable_id`,`linkable_type`),
  KEY `link_group_items_created_by_foreign` (`created_by`),
  CONSTRAINT `link_group_items_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `link_group_items_link_group_id_foreign` FOREIGN KEY (`link_group_id`) REFERENCES `link_groups` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `link_groups`
--

DROP TABLE IF EXISTS `link_groups`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `link_groups` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `link_type_id` bigint(20) unsigned NOT NULL,
  `property_id` int(10) unsigned DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  `root_item_id` bigint(20) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `link_groups_link_type_id_foreign` (`link_type_id`),
  KEY `link_groups_property_id_foreign` (`property_id`),
  KEY `link_groups_created_by_foreign` (`created_by`),
  KEY `link_groups_root_item_id_foreign` (`root_item_id`),
  CONSTRAINT `link_groups_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `link_groups_link_type_id_foreign` FOREIGN KEY (`link_type_id`) REFERENCES `link_types` (`id`),
  CONSTRAINT `link_groups_property_id_foreign` FOREIGN KEY (`property_id`) REFERENCES `properties` (`id`),
  CONSTRAINT `link_groups_root_item_id_foreign` FOREIGN KEY (`root_item_id`) REFERENCES `link_group_items` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `link_types`
--

DROP TABLE IF EXISTS `link_types`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `link_types` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `slug` varchar(191) NOT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT 1,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `link_types_name_unique` (`name`),
  UNIQUE KEY `link_types_slug_unique` (`slug`),
  KEY `link_types_created_by_foreign` (`created_by`),
  CONSTRAINT `link_types_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `master_product_variants`
--

DROP TABLE IF EXISTS `master_product_variants`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `master_product_variants` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `master_product_id` bigint(20) unsigned NOT NULL,
  `sku` varchar(191) NOT NULL,
  `name` varchar(191) DEFAULT NULL,
  `excerpt` text DEFAULT NULL,
  `price` decimal(15,4) DEFAULT NULL,
  `original_price` decimal(15,4) DEFAULT NULL,
  `stock` decimal(15,4) NOT NULL DEFAULT 0.0000,
  `weight` decimal(15,4) DEFAULT NULL,
  `height` decimal(15,4) DEFAULT NULL,
  `width` decimal(15,4) DEFAULT NULL,
  `length` decimal(15,4) DEFAULT NULL,
  `units_sold` int(10) unsigned NOT NULL DEFAULT 0,
  `last_sale_at` datetime DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `description` text DEFAULT NULL,
  `state` varchar(191) DEFAULT NULL,
  `tax_category_id` bigint(20) unsigned DEFAULT NULL,
  `backorder` decimal(15,4) DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `master_product_variants_created_by_foreign` (`created_by`),
  CONSTRAINT `master_product_variants_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `master_products`
--

DROP TABLE IF EXISTS `master_products`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `master_products` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `slug` varchar(191) DEFAULT NULL,
  `price` decimal(15,4) DEFAULT NULL,
  `original_price` decimal(15,4) DEFAULT NULL,
  `excerpt` text DEFAULT NULL,
  `description` text DEFAULT NULL,
  `state` varchar(191) NOT NULL DEFAULT 'draft',
  `weight` decimal(15,4) DEFAULT NULL,
  `height` decimal(15,4) DEFAULT NULL,
  `width` decimal(15,4) DEFAULT NULL,
  `length` decimal(15,4) DEFAULT NULL,
  `ext_title` varchar(511) DEFAULT NULL,
  `meta_keywords` text DEFAULT NULL,
  `meta_description` text DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `tax_category_id` bigint(20) unsigned DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `master_products_created_by_foreign` (`created_by`),
  CONSTRAINT `master_products_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `media`
--

DROP TABLE IF EXISTS `media`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `media` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `model_type` varchar(191) NOT NULL,
  `model_id` bigint(20) unsigned NOT NULL,
  `uuid` char(36) DEFAULT NULL,
  `collection_name` varchar(191) NOT NULL,
  `name` varchar(191) NOT NULL,
  `file_name` varchar(191) NOT NULL,
  `mime_type` varchar(191) DEFAULT NULL,
  `disk` varchar(191) NOT NULL,
  `conversions_disk` varchar(191) DEFAULT NULL,
  `size` bigint(20) unsigned NOT NULL,
  `manipulations` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`manipulations`)),
  `custom_properties` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`custom_properties`)),
  `generated_conversions` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`generated_conversions`)),
  `responsive_images` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`responsive_images`)),
  `order_column` int(10) unsigned DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `media_uuid_unique` (`uuid`),
  KEY `media_model_type_model_id_index` (`model_type`,`model_id`),
  KEY `media_order_column_index` (`order_column`)
) ENGINE=InnoDB AUTO_INCREMENT=9097 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `migrations`
--

DROP TABLE IF EXISTS `migrations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `migrations` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `migration` varchar(191) NOT NULL,
  `batch` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=399 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `model_permissions`
--

DROP TABLE IF EXISTS `model_permissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `model_permissions` (
  `permission_id` int(10) unsigned NOT NULL,
  `model_type` varchar(191) NOT NULL,
  `model_id` bigint(20) unsigned NOT NULL,
  PRIMARY KEY (`permission_id`,`model_id`,`model_type`),
  KEY `model_permissions_model_type_model_id_index` (`model_type`,`model_id`),
  CONSTRAINT `model_permissions_permission_id_foreign` FOREIGN KEY (`permission_id`) REFERENCES `permissions` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `model_property_values`
--

DROP TABLE IF EXISTS `model_property_values`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `model_property_values` (
  `property_value_id` int(10) unsigned NOT NULL,
  `model_type` varchar(191) NOT NULL,
  `model_id` bigint(20) unsigned NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`property_value_id`,`model_id`,`model_type`),
  KEY `model_property_values_model_type_model_id_index` (`model_type`,`model_id`),
  CONSTRAINT `model_property_values_property_value_id_foreign` FOREIGN KEY (`property_value_id`) REFERENCES `property_values` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `model_roles`
--

DROP TABLE IF EXISTS `model_roles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `model_roles` (
  `role_id` int(10) unsigned NOT NULL,
  `model_type` varchar(191) NOT NULL,
  `model_id` bigint(20) unsigned NOT NULL,
  PRIMARY KEY (`role_id`,`model_id`,`model_type`),
  KEY `model_roles_model_type_model_id_index` (`model_type`,`model_id`),
  CONSTRAINT `model_roles_role_id_foreign` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `model_taxons`
--

DROP TABLE IF EXISTS `model_taxons`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `model_taxons` (
  `taxon_id` int(10) unsigned NOT NULL,
  `model_type` varchar(191) NOT NULL,
  `model_id` bigint(20) unsigned NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`taxon_id`,`model_id`,`model_type`),
  KEY `model_taxons_model_type_model_id_index` (`model_type`,`model_id`),
  CONSTRAINT `model_taxons_taxon_id_foreign` FOREIGN KEY (`taxon_id`) REFERENCES `taxons` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `notifications`
--

DROP TABLE IF EXISTS `notifications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `notifications` (
  `id` char(36) NOT NULL,
  `type` varchar(191) NOT NULL,
  `notifiable_type` varchar(191) NOT NULL,
  `notifiable_id` bigint(20) unsigned NOT NULL,
  `data` text NOT NULL,
  `read_at` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `notifications_notifiable_type_notifiable_id_index` (`notifiable_type`,`notifiable_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `order_items`
--

DROP TABLE IF EXISTS `order_items`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `order_items` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `order_id` int(10) unsigned NOT NULL,
  `product_type` varchar(191) NOT NULL,
  `product_id` int(10) unsigned NOT NULL,
  `name` varchar(191) DEFAULT NULL COMMENT 'The product name at the moment of buying',
  `fulfillment_status` varchar(191) NOT NULL DEFAULT 'unfulfilled',
  `quantity` int(11) NOT NULL,
  `price` decimal(15,4) NOT NULL,
  `configuration` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`configuration`)),
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `order_items_order_id_foreign` (`order_id`),
  KEY `order_items_created_by_foreign` (`created_by`),
  CONSTRAINT `order_items_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `order_items_order_id_foreign` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `orders`
--

DROP TABLE IF EXISTS `orders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `orders` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `number` varchar(32) NOT NULL,
  `status` varchar(32) NOT NULL,
  `fulfillment_status` varchar(191) NOT NULL DEFAULT 'unfulfilled',
  `language` char(2) DEFAULT NULL COMMENT 'The two letter ISO 639-1 language code',
  `currency` char(3) DEFAULT NULL,
  `user_id` int(10) unsigned DEFAULT NULL,
  `billpayer_id` int(10) unsigned DEFAULT NULL,
  `customer_id` int(10) unsigned DEFAULT NULL,
  `shipping_address_id` int(10) unsigned DEFAULT NULL,
  `shipping_method_id` bigint(20) unsigned DEFAULT NULL,
  `channel_id` int(10) unsigned DEFAULT NULL,
  `payable_remote_id` varchar(191) DEFAULT NULL COMMENT 'The remote id used by the payment subsystem',
  `notes` text DEFAULT NULL,
  `ordered_at` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `payment_method_id` bigint(20) unsigned DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `order_number_unique` (`number`),
  KEY `orders_user_id_foreign` (`user_id`),
  KEY `orders_billpayer_id_foreign` (`billpayer_id`),
  KEY `orders_shipping_address_id_foreign` (`shipping_address_id`),
  KEY `orders_customer_id_foreign` (`customer_id`),
  KEY `orders_shipping_method_id_foreign` (`shipping_method_id`),
  KEY `orders_payment_method_id_foreign` (`payment_method_id`),
  KEY `orders_created_by_foreign` (`created_by`),
  CONSTRAINT `orders_billpayer_id_foreign` FOREIGN KEY (`billpayer_id`) REFERENCES `billpayers` (`id`),
  CONSTRAINT `orders_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `orders_customer_id_foreign` FOREIGN KEY (`customer_id`) REFERENCES `customers` (`id`),
  CONSTRAINT `orders_payment_method_id_foreign` FOREIGN KEY (`payment_method_id`) REFERENCES `payment_methods` (`id`),
  CONSTRAINT `orders_shipping_address_id_foreign` FOREIGN KEY (`shipping_address_id`) REFERENCES `addresses` (`id`),
  CONSTRAINT `orders_shipping_method_id_foreign` FOREIGN KEY (`shipping_method_id`) REFERENCES `shipping_methods` (`id`),
  CONSTRAINT `orders_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `organizations`
--

DROP TABLE IF EXISTS `organizations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `organizations` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `tax_nr` varchar(17) DEFAULT NULL COMMENT 'Tax/VAT Identification Number',
  `registration_nr` varchar(191) DEFAULT NULL COMMENT 'Company/Trade Registration Number',
  `email` varchar(191) DEFAULT NULL,
  `phone` varchar(22) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `organizations_created_by_foreign` (`created_by`),
  CONSTRAINT `organizations_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `password_resets`
--

DROP TABLE IF EXISTS `password_resets`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `password_resets` (
  `email` varchar(191) NOT NULL,
  `token` varchar(191) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  KEY `password_resets_email_index` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_history`
--

DROP TABLE IF EXISTS `payment_history`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_history` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `payment_id` bigint(20) NOT NULL,
  `old_status` varchar(35) DEFAULT NULL,
  `new_status` varchar(35) NOT NULL,
  `message` varchar(191) DEFAULT NULL,
  `native_status` varchar(191) DEFAULT NULL,
  `transaction_number` varchar(191) DEFAULT NULL,
  `transaction_amount` decimal(15,4) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `payment_history_created_by_foreign` (`created_by`),
  CONSTRAINT `payment_history_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payment_methods`
--

DROP TABLE IF EXISTS `payment_methods`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payment_methods` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `zone_id` bigint(20) unsigned DEFAULT NULL,
  `description` text DEFAULT NULL,
  `gateway` varchar(191) NOT NULL,
  `configuration` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`configuration`)),
  `is_enabled` tinyint(1) NOT NULL DEFAULT 1,
  `transaction_count` bigint(20) NOT NULL DEFAULT 0,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `payment_methods_created_by_foreign` (`created_by`),
  KEY `payment_methods_zone_id_foreign` (`zone_id`),
  CONSTRAINT `payment_methods_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `payment_methods_zone_id_foreign` FOREIGN KEY (`zone_id`) REFERENCES `zones` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `payments`
--

DROP TABLE IF EXISTS `payments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `payments` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `payment_method_id` bigint(20) unsigned NOT NULL,
  `subtype` varchar(191) DEFAULT NULL,
  `payable_type` varchar(191) NOT NULL,
  `payable_id` bigint(20) unsigned NOT NULL,
  `hash` varchar(191) DEFAULT NULL,
  `remote_id` varchar(191) DEFAULT NULL,
  `data` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`data`)),
  `currency` char(3) NOT NULL,
  `amount` decimal(15,4) NOT NULL,
  `amount_paid` decimal(15,4) NOT NULL DEFAULT 0.0000,
  `status` varchar(35) NOT NULL,
  `status_message` varchar(191) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `payments_hash_unique` (`hash`),
  UNIQUE KEY `unique_remote_id` (`payment_method_id`,`remote_id`),
  KEY `payments_created_by_foreign` (`created_by`),
  CONSTRAINT `payments_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `payments_payment_method_id_foreign` FOREIGN KEY (`payment_method_id`) REFERENCES `payment_methods` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `permissions`
--

DROP TABLE IF EXISTS `permissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `permissions` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `guard_name` varchar(191) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `permissions_created_by_foreign` (`created_by`),
  CONSTRAINT `permissions_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=115 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `personal_access_tokens`
--

DROP TABLE IF EXISTS `personal_access_tokens`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `personal_access_tokens` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `tokenable_type` varchar(191) NOT NULL,
  `tokenable_id` bigint(20) unsigned NOT NULL,
  `name` varchar(191) NOT NULL,
  `token` varchar(64) NOT NULL,
  `abilities` text DEFAULT NULL,
  `last_used_at` timestamp NULL DEFAULT NULL,
  `expires_at` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `personal_access_tokens_token_unique` (`token`),
  KEY `personal_access_tokens_tokenable_type_tokenable_id_index` (`tokenable_type`,`tokenable_id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `persons`
--

DROP TABLE IF EXISTS `persons`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `persons` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `firstname` varchar(191) NOT NULL COMMENT 'First name',
  `lastname` varchar(191) NOT NULL COMMENT 'Last Name',
  `email` varchar(191) DEFAULT NULL,
  `phone` varchar(22) DEFAULT NULL,
  `birthdate` date DEFAULT NULL,
  `gender` enum('','m','f') DEFAULT NULL,
  `nin` varchar(21) DEFAULT NULL COMMENT 'National Identification Number',
  `nameorder` enum('western','eastern') NOT NULL DEFAULT 'western' COMMENT 'western: First Last, eastern: Last First',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `persons_created_by_foreign` (`created_by`),
  CONSTRAINT `persons_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `preferences`
--

DROP TABLE IF EXISTS `preferences`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `preferences` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `key` varchar(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL,
  `user_id` int(10) unsigned NOT NULL,
  `value` text DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `preferences_key_user_id_unique` (`key`,`user_id`),
  KEY `preferences_key_index` (`key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `products`
--

DROP TABLE IF EXISTS `products`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `products` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `slug` varchar(191) DEFAULT NULL,
  `sku` varchar(191) NOT NULL,
  `price` decimal(15,4) DEFAULT NULL,
  `original_price` decimal(15,4) DEFAULT NULL,
  `excerpt` text DEFAULT NULL,
  `description` text DEFAULT NULL,
  `state` enum('draft','inactive','active','unavailable','retired') NOT NULL DEFAULT 'draft',
  `length` decimal(15,4) DEFAULT NULL,
  `width` decimal(15,4) DEFAULT NULL,
  `height` decimal(15,4) DEFAULT NULL,
  `weight` decimal(15,4) DEFAULT NULL,
  `ext_title` varchar(511) DEFAULT NULL,
  `meta_keywords` text DEFAULT NULL,
  `meta_description` text DEFAULT NULL,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `units_sold` int(10) unsigned NOT NULL DEFAULT 0,
  `last_sale_at` datetime DEFAULT NULL,
  `stock` decimal(15,4) NOT NULL DEFAULT 0.0000,
  `tax_category_id` bigint(20) unsigned DEFAULT NULL,
  `backorder` decimal(15,4) DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `products_created_by_foreign` (`created_by`),
  CONSTRAINT `products_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=31 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `profiles`
--

DROP TABLE IF EXISTS `profiles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `profiles` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(10) unsigned NOT NULL,
  `person_id` int(10) unsigned NOT NULL,
  `avatar_type` varchar(191) DEFAULT NULL,
  `avatar_data` text DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `profiles_user_id_foreign` (`user_id`),
  KEY `profiles_person_id_foreign` (`person_id`),
  KEY `profiles_created_by_foreign` (`created_by`),
  CONSTRAINT `profiles_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `profiles_person_id_foreign` FOREIGN KEY (`person_id`) REFERENCES `persons` (`id`),
  CONSTRAINT `profiles_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `properties`
--

DROP TABLE IF EXISTS `properties`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `properties` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `type` varchar(191) NOT NULL,
  `slug` varchar(191) DEFAULT NULL,
  `configuration` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`configuration`)),
  `is_hidden` tinyint(1) NOT NULL DEFAULT 0,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `properties_slug_unique` (`slug`),
  KEY `properties_created_by_foreign` (`created_by`),
  CONSTRAINT `properties_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `property_values`
--

DROP TABLE IF EXISTS `property_values`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `property_values` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `property_id` int(10) unsigned NOT NULL,
  `value` varchar(191) NOT NULL,
  `title` varchar(191) NOT NULL,
  `priority` int(11) DEFAULT NULL,
  `settings` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`settings`)),
  `deleted_at` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `property_values_property_id_foreign` (`property_id`),
  KEY `property_values_priority_index` (`priority`),
  KEY `property_values_created_by_foreign` (`created_by`),
  CONSTRAINT `property_values_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `property_values_property_id_foreign` FOREIGN KEY (`property_id`) REFERENCES `properties` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=183 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `provinces`
--

DROP TABLE IF EXISTS `provinces`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `provinces` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `country_id` char(2) NOT NULL,
  `type` varchar(16) NOT NULL DEFAULT 'province',
  `code` varchar(16) DEFAULT NULL COMMENT 'National identification code',
  `name` varchar(191) NOT NULL,
  `parent_id` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `provinces_country_id_code_index` (`country_id`,`code`),
  KEY `provinces_code_index` (`code`),
  KEY `provinces_parent_id_foreign` (`parent_id`),
  CONSTRAINT `provinces_country_id_foreign` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`),
  CONSTRAINT `provinces_parent_id_foreign` FOREIGN KEY (`parent_id`) REFERENCES `provinces` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `role_permissions`
--

DROP TABLE IF EXISTS `role_permissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `role_permissions` (
  `permission_id` int(10) unsigned NOT NULL,
  `role_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`permission_id`,`role_id`),
  KEY `role_permissions_role_id_foreign` (`role_id`),
  CONSTRAINT `role_permissions_permission_id_foreign` FOREIGN KEY (`permission_id`) REFERENCES `permissions` (`id`) ON DELETE CASCADE,
  CONSTRAINT `role_permissions_role_id_foreign` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `roles`
--

DROP TABLE IF EXISTS `roles`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `roles` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `guard_name` varchar(191) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `roles_created_by_foreign` (`created_by`),
  CONSTRAINT `roles_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `settings`
--

DROP TABLE IF EXISTS `settings`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `settings` (
  `id` varchar(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL,
  `value` text DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `shipments`
--

DROP TABLE IF EXISTS `shipments`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `shipments` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `tracking_number` varchar(191) DEFAULT NULL,
  `reference_number` varchar(191) DEFAULT NULL,
  `address_id` int(10) unsigned NOT NULL,
  `carrier_id` bigint(20) unsigned DEFAULT NULL,
  `is_trackable` tinyint(1) NOT NULL DEFAULT 1,
  `status` varchar(191) NOT NULL DEFAULT 'new',
  `weight` decimal(15,4) DEFAULT NULL,
  `height` decimal(15,4) DEFAULT NULL,
  `width` decimal(15,4) DEFAULT NULL,
  `length` decimal(15,4) DEFAULT NULL,
  `comment` text DEFAULT NULL,
  `configuration` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`configuration`)),
  `label_base64` longtext DEFAULT NULL,
  `label_url` varchar(1024) DEFAULT NULL,
  `carrier_cost` decimal(15,4) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `shipments_address_id_foreign` (`address_id`),
  KEY `shipments_created_by_foreign` (`created_by`),
  CONSTRAINT `shipments_address_id_foreign` FOREIGN KEY (`address_id`) REFERENCES `addresses` (`id`),
  CONSTRAINT `shipments_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `shippables`
--

DROP TABLE IF EXISTS `shippables`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `shippables` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `shipment_id` bigint(20) unsigned NOT NULL,
  `shippable_type` varchar(191) NOT NULL,
  `shippable_id` bigint(20) unsigned NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `shippables_shipment_id_foreign` (`shipment_id`),
  CONSTRAINT `shippables_shipment_id_foreign` FOREIGN KEY (`shipment_id`) REFERENCES `shipments` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `shipping_methods`
--

DROP TABLE IF EXISTS `shipping_methods`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `shipping_methods` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) DEFAULT NULL,
  `carrier_id` bigint(20) unsigned DEFAULT NULL,
  `calculator` varchar(191) DEFAULT NULL,
  `zone_id` bigint(20) unsigned DEFAULT NULL,
  `configuration` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`configuration`)),
  `is_active` tinyint(1) NOT NULL DEFAULT 1,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `shipping_methods_carrier_id_foreign` (`carrier_id`),
  KEY `shipping_methods_zone_id_foreign` (`zone_id`),
  KEY `shipping_methods_created_by_foreign` (`created_by`),
  CONSTRAINT `shipping_methods_carrier_id_foreign` FOREIGN KEY (`carrier_id`) REFERENCES `carriers` (`id`),
  CONSTRAINT `shipping_methods_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `shipping_methods_zone_id_foreign` FOREIGN KEY (`zone_id`) REFERENCES `zones` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `subscription_items`
--

DROP TABLE IF EXISTS `subscription_items`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `subscription_items` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `subscription_id` bigint(20) unsigned NOT NULL,
  `stripe_id` varchar(191) NOT NULL,
  `stripe_product` varchar(191) NOT NULL,
  `stripe_price` varchar(191) NOT NULL,
  `quantity` int(11) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `subscription_items_stripe_id_unique` (`stripe_id`),
  KEY `subscription_items_subscription_id_stripe_price_index` (`subscription_id`,`stripe_price`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `subscriptions`
--

DROP TABLE IF EXISTS `subscriptions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `subscriptions` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` bigint(20) unsigned NOT NULL,
  `type` varchar(191) NOT NULL,
  `stripe_id` varchar(191) NOT NULL,
  `stripe_status` varchar(191) NOT NULL,
  `stripe_price` varchar(191) DEFAULT NULL,
  `quantity` int(11) DEFAULT NULL,
  `trial_ends_at` timestamp NULL DEFAULT NULL,
  `ends_at` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `subscriptions_stripe_id_unique` (`stripe_id`),
  KEY `subscriptions_user_id_stripe_status_index` (`user_id`,`stripe_status`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `tax_categories`
--

DROP TABLE IF EXISTS `tax_categories`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tax_categories` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `is_active` tinyint(1) NOT NULL DEFAULT 1,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  `type` varchar(64) NOT NULL DEFAULT 'physical_goods',
  PRIMARY KEY (`id`),
  KEY `tax_categories_created_by_foreign` (`created_by`),
  CONSTRAINT `tax_categories_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `tax_rates`
--

DROP TABLE IF EXISTS `tax_rates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tax_rates` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `tax_category_id` bigint(20) unsigned DEFAULT NULL,
  `zone_id` bigint(20) unsigned DEFAULT NULL,
  `rate` decimal(15,4) NOT NULL,
  `calculator` varchar(191) DEFAULT NULL,
  `configuration` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`configuration`)),
  `is_active` tinyint(1) NOT NULL DEFAULT 1,
  `valid_from` timestamp NULL DEFAULT NULL,
  `valid_until` timestamp NULL DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `tax_rates_tax_category_id_foreign` (`tax_category_id`),
  KEY `tax_rates_zone_id_foreign` (`zone_id`),
  KEY `tax_rates_created_by_foreign` (`created_by`),
  CONSTRAINT `tax_rates_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `tax_rates_tax_category_id_foreign` FOREIGN KEY (`tax_category_id`) REFERENCES `tax_categories` (`id`),
  CONSTRAINT `tax_rates_zone_id_foreign` FOREIGN KEY (`zone_id`) REFERENCES `zones` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `taxonomies`
--

DROP TABLE IF EXISTS `taxonomies`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `taxonomies` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `slug` varchar(191) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `taxonomies_slug_unique` (`slug`),
  KEY `taxonomies_created_by_foreign` (`created_by`),
  CONSTRAINT `taxonomies_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `taxons`
--

DROP TABLE IF EXISTS `taxons`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `taxons` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `taxonomy_id` int(10) unsigned NOT NULL,
  `parent_id` int(10) unsigned DEFAULT NULL,
  `priority` int(11) DEFAULT NULL,
  `name` varchar(191) NOT NULL,
  `slug` varchar(191) DEFAULT NULL,
  `ext_title` varchar(511) DEFAULT NULL,
  `meta_keywords` text DEFAULT NULL,
  `meta_description` text DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  `subtitle` varchar(191) DEFAULT NULL,
  `excerpt` text DEFAULT NULL,
  `description` text DEFAULT NULL,
  `top_content` text DEFAULT NULL,
  `bottom_content` text DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `taxons_taxonomy_id_slug_parent_id_unique` (`taxonomy_id`,`slug`,`parent_id`),
  KEY `taxons_parent_id_foreign` (`parent_id`),
  KEY `taxons_priority_index` (`priority`),
  KEY `taxons_created_by_foreign` (`created_by`),
  CONSTRAINT `taxons_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `taxons_parent_id_foreign` FOREIGN KEY (`parent_id`) REFERENCES `taxons` (`id`) ON DELETE CASCADE,
  CONSTRAINT `taxons_taxonomy_id_foreign` FOREIGN KEY (`taxonomy_id`) REFERENCES `taxonomies` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `tcb_stories`
--

DROP TABLE IF EXISTS `tcb_stories`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tcb_stories` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `news` text NOT NULL,
  `news_language` enum('en','fr') NOT NULL DEFAULT 'fr',
  `hyperlink` varchar(500) DEFAULT NULL,
  `website` varchar(191) DEFAULT NULL,
  `teaser` varchar(140) DEFAULT NULL,
  `opener` varchar(280) DEFAULT NULL,
  `why_it_matters` varchar(1000) DEFAULT NULL,
  `go_deeper` text DEFAULT NULL,
  `is_published` tinyint(1) NOT NULL DEFAULT 0,
  `teaser_fr` varchar(140) DEFAULT NULL,
  `opener_fr` varchar(280) DEFAULT NULL,
  `why_it_matters_fr` varchar(1000) DEFAULT NULL,
  `go_deeper_fr` text DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `ynh_the_cyber_brief_updated_at_index` (`updated_at`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `telescope_entries`
--

DROP TABLE IF EXISTS `telescope_entries`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `telescope_entries` (
  `sequence` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `uuid` char(36) NOT NULL,
  `batch_id` char(36) NOT NULL,
  `family_hash` varchar(191) DEFAULT NULL,
  `should_display_on_index` tinyint(1) NOT NULL DEFAULT 1,
  `type` varchar(20) NOT NULL,
  `content` longtext NOT NULL,
  `created_at` datetime DEFAULT NULL,
  PRIMARY KEY (`sequence`),
  UNIQUE KEY `telescope_entries_uuid_unique` (`uuid`),
  KEY `telescope_entries_batch_id_index` (`batch_id`),
  KEY `telescope_entries_family_hash_index` (`family_hash`),
  KEY `telescope_entries_created_at_index` (`created_at`),
  KEY `telescope_entries_type_should_display_on_index_index` (`type`,`should_display_on_index`)
) ENGINE=InnoDB AUTO_INCREMENT=6239576 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `telescope_entries_tags`
--

DROP TABLE IF EXISTS `telescope_entries_tags`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `telescope_entries_tags` (
  `entry_uuid` char(36) NOT NULL,
  `tag` varchar(191) NOT NULL,
  PRIMARY KEY (`entry_uuid`,`tag`),
  KEY `telescope_entries_tags_tag_index` (`tag`),
  CONSTRAINT `telescope_entries_tags_entry_uuid_foreign` FOREIGN KEY (`entry_uuid`) REFERENCES `telescope_entries` (`uuid`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `telescope_monitoring`
--

DROP TABLE IF EXISTS `telescope_monitoring`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `telescope_monitoring` (
  `tag` varchar(191) NOT NULL,
  PRIMARY KEY (`tag`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `tenants`
--

DROP TABLE IF EXISTS `tenants`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `tenants` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `tenants_name_unique` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `users`
--

DROP TABLE IF EXISTS `users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `email` varchar(191) NOT NULL,
  `password` varchar(191) NOT NULL,
  `remember_token` varchar(100) DEFAULT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `type` varchar(191) NOT NULL DEFAULT 'client',
  `is_active` tinyint(1) NOT NULL DEFAULT 1,
  `last_login_at` datetime DEFAULT NULL,
  `login_count` int(10) unsigned DEFAULT 0,
  `deleted_at` timestamp NULL DEFAULT NULL,
  `tenant_id` bigint(20) unsigned DEFAULT NULL,
  `customer_id` int(10) unsigned DEFAULT NULL,
  `am_api_token` varchar(191) DEFAULT NULL,
  `terms_accepted` tinyint(1) NOT NULL DEFAULT 0,
  `se_api_token` varchar(191) DEFAULT NULL,
  `stripe_id` varchar(191) DEFAULT NULL,
  `pm_type` varchar(191) DEFAULT NULL,
  `pm_last_four` varchar(4) DEFAULT NULL,
  `trial_ends_at` timestamp NULL DEFAULT NULL,
  `stripe_tx_id` varchar(191) DEFAULT NULL,
  `superset_id` varchar(191) DEFAULT NULL,
  `performa_domain` varchar(191) DEFAULT NULL,
  `performa_secret` varchar(191) DEFAULT NULL,
  `gets_audit_report` tinyint(1) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  UNIQUE KEY `users_email_unique` (`email`),
  KEY `users_tenant_id_foreign` (`tenant_id`),
  KEY `users_stripe_id_index` (`stripe_id`),
  KEY `users_stripe_tx_id_index` (`stripe_tx_id`),
  CONSTRAINT `users_tenant_id_foreign` FOREIGN KEY (`tenant_id`) REFERENCES `tenants` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=18 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_applications`
--

DROP TABLE IF EXISTS `ynh_applications`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_applications` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `description` longtext DEFAULT NULL,
  `version` varchar(191) NOT NULL,
  `path` varchar(191) DEFAULT NULL,
  `sku` varchar(191) NOT NULL,
  `ynh_server_id` bigint(20) unsigned NOT NULL,
  `updated` tinyint(1) NOT NULL DEFAULT 0,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `ynh_order_id` bigint(20) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `ynh_applications_ynh_order_id_foreign` (`ynh_order_id`),
  KEY `ynh_applications_ynh_server_id_foreign` (`ynh_server_id`),
  CONSTRAINT `ynh_applications_ynh_order_id_foreign` FOREIGN KEY (`ynh_order_id`) REFERENCES `ynh_orders` (`id`) ON DELETE SET NULL,
  CONSTRAINT `ynh_applications_ynh_server_id_foreign` FOREIGN KEY (`ynh_server_id`) REFERENCES `ynh_servers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_backups`
--

DROP TABLE IF EXISTS `ynh_backups`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_backups` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `user_id` int(10) unsigned DEFAULT NULL,
  `ynh_server_id` bigint(20) unsigned NOT NULL,
  `name` varchar(191) NOT NULL,
  `size` bigint(20) NOT NULL,
  `storage_path` varchar(191) DEFAULT NULL,
  `result` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`result`)),
  PRIMARY KEY (`id`),
  KEY `ynh_backups_user_id_foreign` (`user_id`),
  KEY `ynh_backups_ynh_server_id_foreign` (`ynh_server_id`),
  CONSTRAINT `ynh_backups_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `ynh_backups_ynh_server_id_foreign` FOREIGN KEY (`ynh_server_id`) REFERENCES `ynh_servers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_cves`
--

DROP TABLE IF EXISTS `ynh_cves`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_cves` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `os` varchar(191) NOT NULL,
  `version` varchar(191) NOT NULL,
  `package` varchar(191) NOT NULL,
  `cve` varchar(191) NOT NULL,
  `status` varchar(191) NOT NULL,
  `urgency` varchar(191) NOT NULL,
  `fixed_version` varchar(191) NOT NULL,
  `tracker` varchar(191) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `ynh_cves_os_index` (`os`),
  KEY `ynh_cves_version_index` (`version`),
  KEY `ynh_cves_package_index` (`package`)
) ENGINE=InnoDB AUTO_INCREMENT=137009 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_domains`
--

DROP TABLE IF EXISTS `ynh_domains`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_domains` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `is_principal` tinyint(1) NOT NULL,
  `ynh_server_id` bigint(20) unsigned NOT NULL,
  `updated` tinyint(1) NOT NULL DEFAULT 0,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `ynh_domains_ynh_server_id_foreign` (`ynh_server_id`),
  CONSTRAINT `ynh_domains_ynh_server_id_foreign` FOREIGN KEY (`ynh_server_id`) REFERENCES `ynh_servers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_frameworks`
--

DROP TABLE IF EXISTS `ynh_frameworks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_frameworks` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `name` varchar(191) NOT NULL,
  `description` varchar(2000) NOT NULL,
  `locale` varchar(191) DEFAULT NULL,
  `copyright` varchar(191) DEFAULT NULL,
  `version` varchar(191) DEFAULT NULL,
  `provider` varchar(191) DEFAULT NULL,
  `file` varchar(191) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=27 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_mitre_attck`
--

DROP TABLE IF EXISTS `ynh_mitre_attck`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_mitre_attck` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `uid` varchar(191) NOT NULL,
  `title` varchar(191) NOT NULL,
  `tactics` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`tactics`)),
  `description` varchar(3000) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `ynh_mitre_attck_uid_index` (`uid`)
) ENGINE=InnoDB AUTO_INCREMENT=58 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_nginx_logs`
--

DROP TABLE IF EXISTS `ynh_nginx_logs`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_nginx_logs` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `updated` tinyint(1) NOT NULL DEFAULT 0,
  `from_ynh_server_id` bigint(20) unsigned DEFAULT NULL,
  `to_ynh_server_id` bigint(20) unsigned DEFAULT NULL,
  `from_ip_address` varchar(191) NOT NULL,
  `to_ip_address` varchar(191) NOT NULL,
  `service` varchar(256) NOT NULL,
  `weight` bigint(20) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `ynh_nginx_logs_from_ynh_server_id_foreign` (`from_ynh_server_id`),
  KEY `ynh_nginx_logs_to_ynh_server_id_foreign` (`to_ynh_server_id`),
  CONSTRAINT `ynh_nginx_logs_from_ynh_server_id_foreign` FOREIGN KEY (`from_ynh_server_id`) REFERENCES `ynh_servers` (`id`),
  CONSTRAINT `ynh_nginx_logs_to_ynh_server_id_foreign` FOREIGN KEY (`to_ynh_server_id`) REFERENCES `ynh_servers` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=209 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_orders`
--

DROP TABLE IF EXISTS `ynh_orders`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_orders` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `order_id` int(10) unsigned NOT NULL,
  `order_item_id` int(10) unsigned NOT NULL,
  `product_type` enum('application','server') NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `ynh_orders_order_id_foreign` (`order_id`),
  KEY `ynh_orders_order_item_id_foreign` (`order_item_id`),
  CONSTRAINT `ynh_orders_order_id_foreign` FOREIGN KEY (`order_id`) REFERENCES `orders` (`id`) ON DELETE CASCADE,
  CONSTRAINT `ynh_orders_order_item_id_foreign` FOREIGN KEY (`order_item_id`) REFERENCES `order_items` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_osquery`
--

DROP TABLE IF EXISTS `ynh_osquery`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_osquery` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `ynh_server_id` bigint(20) unsigned NOT NULL,
  `row` bigint(20) NOT NULL,
  `name` varchar(191) NOT NULL,
  `host_identifier` varchar(191) NOT NULL,
  `calendar_time` datetime NOT NULL,
  `unix_time` bigint(20) NOT NULL,
  `epoch` bigint(20) NOT NULL,
  `counter` bigint(20) NOT NULL,
  `numerics` tinyint(1) NOT NULL,
  `columns` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`columns`)),
  `action` varchar(191) NOT NULL,
  `packed` tinyint(1) NOT NULL DEFAULT 1,
  `dismissed` tinyint(1) NOT NULL DEFAULT 0,
  `columns_uid` varchar(191) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `ynh_osquery_ynh_server_id_foreign` (`ynh_server_id`),
  KEY `ynh_osquery_name_index` (`name`),
  KEY `ynh_osquery_calendar_time_index` (`calendar_time`),
  KEY `ynh_osquery_updated_at_index` (`updated_at`),
  KEY `ynh_osquery_columns_uid_index` (`columns_uid`),
  CONSTRAINT `ynh_osquery_ynh_server_id_foreign` FOREIGN KEY (`ynh_server_id`) REFERENCES `ynh_servers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=8300 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_osquery_events_counts`
--

DROP TABLE IF EXISTS `ynh_osquery_events_counts`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_osquery_events_counts` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `ynh_server_id` bigint(20) unsigned NOT NULL,
  `date_min` datetime NOT NULL,
  `date_max` datetime NOT NULL,
  `count` int(11) NOT NULL DEFAULT 0,
  `events` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '[]' CHECK (json_valid(`events`)),
  PRIMARY KEY (`id`),
  KEY `ynh_osquery_events_counts_ynh_server_id_foreign` (`ynh_server_id`),
  KEY `ynh_osquery_events_counts_date_min_index` (`date_min`),
  KEY `ynh_osquery_events_counts_date_max_index` (`date_max`),
  CONSTRAINT `ynh_osquery_events_counts_ynh_server_id_foreign` FOREIGN KEY (`ynh_server_id`) REFERENCES `ynh_servers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=7637 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_osquery_latest_events`
--

DROP TABLE IF EXISTS `ynh_osquery_latest_events`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_osquery_latest_events` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `calendar_time` datetime NOT NULL,
  `event_name` varchar(191) NOT NULL,
  `server_name` varchar(191) NOT NULL,
  `ynh_osquery_id` bigint(20) unsigned NOT NULL,
  `ynh_server_id` bigint(20) unsigned NOT NULL,
  `updated` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `ynh_osquery_latest_events_ynh_osquery_id_foreign` (`ynh_osquery_id`),
  KEY `ynh_osquery_latest_events_ynh_server_id_foreign` (`ynh_server_id`),
  KEY `ynh_osquery_latest_events_calendar_time_index` (`calendar_time`),
  KEY `ynh_osquery_latest_events_event_name_index` (`event_name`),
  KEY `ynh_osquery_latest_events_server_name_index` (`server_name`),
  CONSTRAINT `ynh_osquery_latest_events_ynh_osquery_id_foreign` FOREIGN KEY (`ynh_osquery_id`) REFERENCES `ynh_osquery` (`id`) ON DELETE CASCADE,
  CONSTRAINT `ynh_osquery_latest_events_ynh_server_id_foreign` FOREIGN KEY (`ynh_server_id`) REFERENCES `ynh_servers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_osquery_packages`
--

DROP TABLE IF EXISTS `ynh_osquery_packages`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_osquery_packages` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `ynh_server_id` bigint(20) unsigned NOT NULL,
  `os` varchar(191) NOT NULL,
  `os_version` varchar(191) NOT NULL,
  `package` varchar(191) NOT NULL,
  `package_version` varchar(191) NOT NULL,
  `cves` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`cves`)),
  `ynh_cve_id` bigint(20) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `ynh_osquery_packages_ynh_server_id_foreign` (`ynh_server_id`),
  KEY `ynh_osquery_packages_os_index` (`os`),
  KEY `ynh_osquery_packages_os_version_index` (`os_version`),
  KEY `ynh_osquery_packages_package_index` (`package`),
  KEY `ynh_osquery_packages_ynh_cve_id_foreign` (`ynh_cve_id`),
  CONSTRAINT `ynh_osquery_packages_ynh_cve_id_foreign` FOREIGN KEY (`ynh_cve_id`) REFERENCES `ynh_cves` (`id`) ON DELETE SET NULL,
  CONSTRAINT `ynh_osquery_packages_ynh_server_id_foreign` FOREIGN KEY (`ynh_server_id`) REFERENCES `ynh_servers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=12517 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_osquery_rules`
--

DROP TABLE IF EXISTS `ynh_osquery_rules`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_osquery_rules` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `name` varchar(191) NOT NULL,
  `description` varchar(255) NOT NULL,
  `query` varchar(3000) NOT NULL,
  `version` varchar(10) DEFAULT NULL,
  `interval` int(11) NOT NULL DEFAULT 3600,
  `removed` tinyint(1) NOT NULL DEFAULT 1,
  `snapshot` tinyint(1) NOT NULL DEFAULT 0,
  `platform` enum('darwin','linux','posix','windows','gentoo','ubuntu','centos','all') NOT NULL DEFAULT 'all',
  `category` varchar(191) DEFAULT NULL,
  `enabled` tinyint(1) NOT NULL DEFAULT 0,
  `attck` varchar(500) DEFAULT NULL,
  `is_ioc` tinyint(1) NOT NULL DEFAULT 0,
  `score` double NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=390 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_ossec_checks`
--

DROP TABLE IF EXISTS `ynh_ossec_checks`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_ossec_checks` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `ynh_ossec_policy_id` bigint(20) unsigned NOT NULL,
  `uid` int(11) NOT NULL,
  `title` varchar(500) NOT NULL,
  `description` varchar(5000) NOT NULL,
  `rationale` varchar(2000) NOT NULL,
  `impact` varchar(2000) NOT NULL,
  `remediation` varchar(3000) NOT NULL,
  `references` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`references`)),
  `compliance` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`compliance`)),
  `requirements` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`requirements`)),
  `rule` longtext NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ynh_ossec_checks_uid_unique` (`uid`),
  KEY `ynh_ossec_checks_ynh_ossec_policy_id_foreign` (`ynh_ossec_policy_id`),
  KEY `ynh_ossec_checks_uid_index` (`uid`),
  FULLTEXT KEY `ynh_ossec_checks_index_all` (`title`,`description`,`rationale`,`remediation`),
  CONSTRAINT `ynh_ossec_checks_ynh_ossec_policy_id_foreign` FOREIGN KEY (`ynh_ossec_policy_id`) REFERENCES `ynh_ossec_policies` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4515 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_ossec_policies`
--

DROP TABLE IF EXISTS `ynh_ossec_policies`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_ossec_policies` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `uid` varchar(191) NOT NULL,
  `name` varchar(191) NOT NULL,
  `description` varchar(1000) NOT NULL,
  `references` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`references`)),
  `requirements` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`requirements`)),
  PRIMARY KEY (`id`),
  UNIQUE KEY `ynh_ossec_policies_uid_unique` (`uid`),
  KEY `ynh_ossec_policies_uid_index` (`uid`)
) ENGINE=InnoDB AUTO_INCREMENT=25 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_overview`
--

DROP TABLE IF EXISTS `ynh_overview`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_overview` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `monitored_ips` int(11) NOT NULL DEFAULT 0,
  `monitored_dns` int(11) NOT NULL DEFAULT 0,
  `collected_metrics` int(11) NOT NULL DEFAULT 0,
  `collected_events` int(11) NOT NULL DEFAULT 0,
  `vulns_high` int(11) NOT NULL DEFAULT 0,
  `vulns_high_unverified` int(11) NOT NULL DEFAULT 0,
  `vulns_medium` int(11) NOT NULL DEFAULT 0,
  `vulns_low` int(11) NOT NULL DEFAULT 0,
  `monitored_servers` int(11) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `ynh_summaries_created_by_foreign` (`created_by`),
  CONSTRAINT `ynh_summaries_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_permissions`
--

DROP TABLE IF EXISTS `ynh_permissions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_permissions` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `ynh_user_id` bigint(20) unsigned NOT NULL,
  `ynh_application_id` bigint(20) unsigned NOT NULL,
  `updated` tinyint(1) NOT NULL DEFAULT 0,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `is_visitors` tinyint(1) NOT NULL DEFAULT 0,
  `is_all_users` tinyint(1) NOT NULL DEFAULT 0,
  `is_user_specific` tinyint(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  KEY `ynh_permissions_ynh_user_id_foreign` (`ynh_user_id`),
  KEY `ynh_permissions_ynh_application_id_foreign` (`ynh_application_id`),
  CONSTRAINT `ynh_permissions_ynh_application_id_foreign` FOREIGN KEY (`ynh_application_id`) REFERENCES `ynh_applications` (`id`) ON DELETE CASCADE,
  CONSTRAINT `ynh_permissions_ynh_user_id_foreign` FOREIGN KEY (`ynh_user_id`) REFERENCES `ynh_users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_servers`
--

DROP TABLE IF EXISTS `ynh_servers`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_servers` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `version` varchar(191) DEFAULT NULL,
  `ip_address` varchar(191) DEFAULT NULL,
  `ssh_port` int(11) DEFAULT NULL,
  `ssh_username` varchar(191) DEFAULT NULL,
  `ssh_public_key` longtext DEFAULT NULL,
  `ssh_private_key` longtext DEFAULT NULL,
  `user_id` int(10) unsigned DEFAULT NULL,
  `updated` tinyint(1) NOT NULL DEFAULT 0,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `is_ready` tinyint(1) NOT NULL DEFAULT 0,
  `ynh_order_id` bigint(20) unsigned DEFAULT NULL,
  `secret` varchar(191) DEFAULT NULL,
  `ip_address_v6` varchar(191) DEFAULT NULL,
  `is_frozen` tinyint(1) NOT NULL DEFAULT 0,
  `added_with_curl` tinyint(1) NOT NULL DEFAULT 0,
  `platform` enum('darwin','linux','posix','windows','ubuntu','centos','gentoo') NOT NULL DEFAULT 'linux',
  PRIMARY KEY (`id`),
  KEY `ynh_servers_user_id_foreign` (`user_id`),
  KEY `ynh_servers_ynh_order_id_foreign` (`ynh_order_id`),
  KEY `ynh_servers_secret_index` (`secret`),
  KEY `ynh_servers_ip_address_index` (`ip_address`),
  KEY `ynh_servers_ip_address_v6_index` (`ip_address_v6`),
  CONSTRAINT `ynh_servers_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `ynh_servers_ynh_order_id_foreign` FOREIGN KEY (`ynh_order_id`) REFERENCES `ynh_orders` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_ssh_traces`
--

DROP TABLE IF EXISTS `ynh_ssh_traces`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_ssh_traces` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `user_id` int(10) unsigned DEFAULT NULL,
  `ynh_server_id` bigint(20) unsigned NOT NULL,
  `uid` varchar(191) NOT NULL,
  `order` int(11) NOT NULL,
  `state` enum('pending','in_progress','done','errored') NOT NULL,
  `trace` varchar(512) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `ynh_ssh_traces_user_id_foreign` (`user_id`),
  KEY `ynh_ssh_traces_ynh_server_id_foreign` (`ynh_server_id`),
  CONSTRAINT `ynh_ssh_traces_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `ynh_ssh_traces_ynh_server_id_foreign` FOREIGN KEY (`ynh_server_id`) REFERENCES `ynh_servers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `ynh_users`
--

DROP TABLE IF EXISTS `ynh_users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `ynh_users` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(191) NOT NULL,
  `fullname` varchar(191) DEFAULT NULL,
  `email` varchar(191) NOT NULL,
  `ynh_server_id` bigint(20) unsigned NOT NULL,
  `updated` tinyint(1) NOT NULL DEFAULT 0,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `ynh_users_ynh_server_id_foreign` (`ynh_server_id`),
  CONSTRAINT `ynh_users_ynh_server_id_foreign` FOREIGN KEY (`ynh_server_id`) REFERENCES `ynh_servers` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `zone_members`
--

DROP TABLE IF EXISTS `zone_members`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `zone_members` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `zone_id` bigint(20) unsigned NOT NULL,
  `member_id` varchar(191) NOT NULL,
  `member_type` varchar(191) NOT NULL,
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `zone_members_zone_id_foreign` (`zone_id`),
  KEY `zone_members_created_by_foreign` (`created_by`),
  CONSTRAINT `zone_members_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL,
  CONSTRAINT `zone_members_zone_id_foreign` FOREIGN KEY (`zone_id`) REFERENCES `zones` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=9154 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `zones`
--

DROP TABLE IF EXISTS `zones`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `zones` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(191) NOT NULL,
  `scope` varchar(191) NOT NULL DEFAULT 'shipping',
  `created_at` timestamp NULL DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT NULL,
  `created_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `zones_created_by_foreign` (`created_by`),
  CONSTRAINT `zones_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

create view v_authorized_keys as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.key_file')) AS `key_file`,
  CONCAT(LEFT(JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.key')), 15), '[...]',
         RIGHT(JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.key')), 15)) AS `key`,
  CASE WHEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.comment')) = 'null' THEN NULL
       ELSE JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.comment'))
  END AS `key_comment`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.algorithm')) AS `algorithm`,
  `ynh_osquery`.`action` AS `action`
FROM ((`ynh_osquery` JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `ynh_osquery`.`ynh_server_id`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`))
WHERE `ynh_osquery`.`name` = 'authorized_keys';

create view v_etc_hosts as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.address')) AS `address`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.hostnames')) AS `hostnames`,
  `ynh_osquery`.`action` AS `action`
FROM ((`ynh_osquery` JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `ynh_osquery`.`ynh_server_id`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`))
WHERE `ynh_osquery`.`name` = 'etc_hosts';

create view v_etc_services as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name')) AS `name`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.port')) AS `port`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.protocol')) AS `protocol`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.comment')) AS `comment`,
  `ynh_osquery`.`action` AS `action`
FROM ((`ynh_osquery` JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `ynh_osquery`.`ynh_server_id`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`))
WHERE `ynh_osquery`.`name` = 'etc_services';

create view v_groups as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.groupname')) AS `name`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.gid')) AS `gid`,
  `ynh_osquery`.`action` AS `action`
FROM (((`ynh_osquery` JOIN `ynh_osquery_latest_events`
ON (`ynh_osquery_latest_events`.`ynh_osquery_id` = `ynh_osquery`.`id` AND
    `ynh_osquery_latest_events`.`event_name` = 'groups')) JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `ynh_osquery`.`ynh_server_id`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`));

create view v_logins_and_logouts as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.pid')) AS `pid`,
  CASE WHEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.host')) = 'null' THEN NULL
       ELSE JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.host'))
  END AS `entry_host`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.time')) AS `entry_timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.tty')) AS `entry_terminal`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.type_name')) AS `entry_type`,
  CASE WHEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.username')) = 'null' THEN NULL
       ELSE JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.username'))
  END AS `entry_username`,
  `ynh_osquery`.`action` AS `action`
FROM ((`ynh_osquery` JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `ynh_osquery`.`ynh_server_id`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`))
WHERE `ynh_osquery`.`name` = 'last';

create view v_network_interfaces as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.address')) AS `address`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.broadcast')) AS `broadcast`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.interface')) AS `interface`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.mask')) AS `mask`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.point_to_point')) AS `point_to_point`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.type')) AS `type`,
  `ynh_osquery`.`action` AS `action`
FROM ((`ynh_osquery` JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `ynh_osquery`.`ynh_server_id`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`))
WHERE `ynh_osquery`.`name` = 'interface_addresses';

create view v_packages as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  CASE `t`.`_type` WHEN 1 THEN 'win'
                   WHEN 2 THEN 'deb'
                   WHEN 3 THEN 'portage'
                   WHEN 4 THEN 'npm'
                   WHEN 5 THEN 'python'
                   WHEN 6 THEN 'rpm'
                   WHEN 7 THEN 'homebrew'
                   WHEN 8 THEN 'chocolatey'
                   ELSE 'n/a'
  END AS `type`,
  CASE `t`.`_type` WHEN 1 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name'))
                   WHEN 2 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name'))
                   WHEN 3 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name'))
                   WHEN 4 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name'))
                   WHEN 5 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name'))
                   WHEN 6 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name'))
                   WHEN 7 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name'))
                   WHEN 8 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name'))
                   ELSE 'n/a'
  END AS `package`,
  CASE `t`.`_type` WHEN 1 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.version'))
                   WHEN 2 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.version'))
                   WHEN 3 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.version'))
                   WHEN 4 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.version'))
                   WHEN 5 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.version'))
                   WHEN 6 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.version'))
                   WHEN 7 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.version'))
                   WHEN 8 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.version'))
                   ELSE 'n/a'
  END AS `version`,
  `ynh_osquery`.`action` AS `action`
FROM ((((
  SELECT
    1 AS `_type`,
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'win_packages'
  UNION
  SELECT
    2 AS `_type`,
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'deb_packages'
  UNION
  SELECT
    3 AS `_type`,
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'portage_packages'
  UNION
  SELECT
    4 AS `_type`,
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'npm_packages'
  UNION
  SELECT
    5 AS `_type`,
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'python_packages'
  UNION
  SELECT
    6 AS `_type`,
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'rpm_packages'
  UNION
  SELECT
    7 AS `_type`,
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'homebrew_packages'
  UNION
  SELECT
    8 AS `_type`,
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'chocolatey_packages'
) `t` JOIN `ynh_osquery` ON (`ynh_osquery`.`id` = `t`.`_oid`)) JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `t`.`_sid`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`));

create view v_processes as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.pid')) AS `pid`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name')) AS `name`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.cmdline')) AS `command`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.path')) AS `path`,
  `ynh_osquery`.`action` AS `action`
FROM ((((
  SELECT
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'processes'
) `t` JOIN `ynh_osquery` ON (`ynh_osquery`.`id` = `t`.`_oid`)) JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `t`.`_sid`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`))
WHERE JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.cmdline')) NOT LIKE '%performa%'
  AND JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.cmdline')) NOT LIKE '%logalert%';

create view v_processes_with_bound_network_sockets as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.path')) AS `path`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.address')) AS `local_address`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.port')) AS `local_port`,
  `ynh_osquery`.`action` AS `action`
FROM ((((
  SELECT
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'process_listening_port'
) `t` JOIN `ynh_osquery` ON (`ynh_osquery`.`id` = `t`.`_oid`)) JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `t`.`_sid`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`));

create view v_processes_with_open_network_sockets as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.pid')) AS `pid`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.path')) AS `path`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.local_address')) AS `local_address`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.local_port')) AS `local_port`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.remote_address')) AS `remote_address`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.remote_port')) AS `remote_port`,
  `ynh_osquery`.`action` AS `action`
FROM ((((
  SELECT
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'open_sockets'
) `t` JOIN `ynh_osquery` ON (`ynh_osquery`.`id` = `t`.`_oid`)) JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `t`.`_sid`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`))
HAVING TRIM(`path`) <> ''
    OR TRIM(`remote_address`) <> '';

create view v_scheduled_tasks as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  CASE WHEN `t`.`_type` = 1 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.path'))
       ELSE 'n/a'
  END AS `file`,
  CASE WHEN `t`.`_type` = 1 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.command'))
       ELSE JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.action'))
  END AS `command`,
  CASE WHEN `t`.`_type` = 1 THEN 'n/a'
       ELSE DATE_FORMAT(FROM_UNIXTIME(JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.last_run_time'))),
                        '%Y-%m-%d %H:%i:%s')
  END AS `last_run_time`,
  CASE WHEN `t`.`_type` = 1 THEN 'n/a'
       ELSE DATE_FORMAT(FROM_UNIXTIME(JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.next_run_time'))),
                        '%Y-%m-%d %H:%i:%s')
  END AS `next_run_time`,
  CASE WHEN `t`.`_type` = 1 THEN CONCAT(JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.minute')), ' ',
                                        JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.hour')), ' ',
                                        JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.day_of_month')),
                                        ' ', JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.month')),
                                        ' ',
                                        JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.day_of_week')))
       ELSE 'n/a'
  END AS `cron`,
  CASE WHEN `t`.`_type` = 1 THEN 'yes'
       WHEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.enabled')) = 1 THEN 'yes'
       ELSE 'no'
  END AS `enabled`,
  `ynh_osquery`.`action` AS `action`
FROM ((((
  SELECT
    1 AS `_type`,
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'crontab'
  UNION
  SELECT
    2 AS `_type`,
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'scheduled_tasks'
) `t` JOIN `ynh_osquery` ON (`ynh_osquery`.`id` = `t`.`_oid`)) JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `t`.`_sid`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`));

create view v_services as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  CASE WHEN `t`.`_type` = 1 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name'))
       ELSE JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name'))
  END AS `name`,
  CASE WHEN `t`.`_type` = 1 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.path'))
       ELSE JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.path'))
  END AS `path`,
  CASE WHEN `t`.`_type` = 1 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.type'))
       ELSE JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.service_type'))
  END AS `type`,
  CASE WHEN `t`.`_type` = 1 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.status'))
       ELSE JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.status'))
  END AS `status`,
  CASE WHEN `t`.`_type` = 1 THEN JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.username'))
       ELSE JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.user_account'))
  END AS `user`,
  `ynh_osquery`.`action` AS `action`
FROM ((((
  SELECT
    1 AS `_type`,
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'startup_items'
  UNION
  SELECT
    2 AS `_type`,
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'services'
) `t` JOIN `ynh_osquery` ON (`ynh_osquery`.`id` = `t`.`_oid`)) JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `t`.`_sid`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`));

create view v_shell_history as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.username')) AS `username`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.shell')) AS `shell`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.command')) AS `command`,
  `ynh_osquery`.`action` AS `action`
FROM ((`ynh_osquery` JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `ynh_osquery`.`ynh_server_id`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`))
WHERE `ynh_osquery`.`name` = 'shell_history';

create view v_startup_items as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.name')) AS `name`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.type')) AS `type`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.status')) AS `status`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.path')) AS `path`,
  `ynh_osquery`.`action` AS `action`
FROM ((`ynh_osquery` JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `ynh_osquery`.`ynh_server_id`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`))
WHERE `ynh_osquery`.`name` = 'startup_items';

create view v_user_accounts as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.uid')) AS `user`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.gid')) AS `group`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.username')) AS `username`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.directory')) AS `home_directory`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.shell')) AS `default_shell`,
  `ynh_osquery`.`action` AS `action`
FROM (((`ynh_osquery` JOIN `ynh_osquery_latest_events`
ON (`ynh_osquery_latest_events`.`ynh_osquery_id` = `ynh_osquery`.`id` AND
    `ynh_osquery_latest_events`.`event_name` = 'users')) JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `ynh_osquery_latest_events`.`ynh_server_id`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`));

create view v_user_ssh_keys as
SELECT DISTINCT
  `ynh_servers`.`user_id` AS `user_id`,
  `users`.`customer_id` AS `customer_id`,
  `users`.`tenant_id` AS `tenant_id`,
  `ynh_osquery`.`id` AS `event_id`,
  `ynh_osquery`.`ynh_server_id` AS `server_id`,
  `ynh_servers`.`name` AS `server_name`,
  `ynh_servers`.`ip_address` AS `server_ip_address`,
  `ynh_osquery`.`calendar_time` AS `timestamp`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.username')) AS `username`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.directory')) AS `directory`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.shell')) AS `shell`,
  JSON_UNQUOTE(JSON_EXTRACT(`ynh_osquery`.`columns`, '$.path')) AS `ssh_key`,
  `ynh_osquery`.`action` AS `action`
FROM ((((
  SELECT
    `ynh_osquery_latest_events`.`ynh_osquery_id` AS `_oid`,
    `ynh_osquery_latest_events`.`ynh_server_id` AS `_sid`
  FROM `ynh_osquery_latest_events`
  WHERE `ynh_osquery_latest_events`.`event_name` = 'user_ssh_keys'
) `t` JOIN `ynh_osquery` ON (`ynh_osquery`.`id` = `t`.`_oid`)) JOIN `ynh_servers`
ON (`ynh_servers`.`id` = `t`.`_sid`)) JOIN `users`
ON (`users`.`id` = `ynh_servers`.`user_id`));

-- Dump completed on 2025-01-30 19:29:50
INSERT INTO migrations (id, migration, batch) VALUES (1, '2014_10_12_000000_create_users_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (2, '2014_10_12_100000_create_password_resets_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (3, '2014_10_13_100000_create_cache_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (4, '2016_11_24_104017_create_countries_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (5, '2016_11_24_104459_create_provinces_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (6, '2016_12_03_110323_create_addresses_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (7, '2016_12_04_104214_create_persons_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (8, '2016_12_04_191141_create_organizations_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (9, '2016_12_18_113707_extend_users_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (10, '2016_12_18_121118_create_profiles_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (11, '2017_05_31_113121_create_acl_tables', 1);
INSERT INTO migrations (id, migration, batch) VALUES (12, '2017_06_11_190822_make_it_tenant_aware', 1);
INSERT INTO migrations (id, migration, batch) VALUES (13, '2017_06_12_073443_create_appshell_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (14, '2017_07_24_194147_create_customers_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (15, '2017_09_26_145245_create_customer_addresses_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (16, '2017_10_07_133259_create_products_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (17, '2017_10_19_192447_create_vanilo_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (18, '2017_10_28_111947_create_carts_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (19, '2017_10_29_224033_create_cart_items_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (20, '2017_11_27_131854_create_billpayers_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (21, '2017_11_27_131855_create_orders_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (22, '2017_11_27_145105_create_order_items_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (23, '2018_02_26_213828_create_gears_tables', 1);
INSERT INTO migrations (id, migration, batch) VALUES (24, '2018_05_12_100622_create_media_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (25, '2018_05_13_105644_create_media_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (26, '2018_05_27_210939_create_settings_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (27, '2018_08_08_100000_create_telescope_entries_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (28, '2018_08_24_160805_create_taxonomies_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (29, '2018_08_24_165408_create_taxons_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (30, '2018_09_22_092746_create_category_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (31, '2018_10_15_224808_add_cart_state', 1);
INSERT INTO migrations (id, migration, batch) VALUES (32, '2018_11_01_181324_add_last_purchase_date_to_customer_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (33, '2018_11_04_211505_create_model_taxons_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (34, '2018_11_10_204207_add_sales_attributes_to_products', 1);
INSERT INTO migrations (id, migration, batch) VALUES (35, '2018_12_08_111450_create_properties_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (36, '2018_12_08_112321_create_property_values_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (37, '2018_12_08_124157_create_model_property_values_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (38, '2018_12_09_193651_create_property_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (39, '2019_02_16_082635_create_shipments_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (40, '2019_04_08_000000_add_stock_field_to_products_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (41, '2019_06_29_215847_convert_user_type_to_varchar', 1);
INSERT INTO migrations (id, migration, batch) VALUES (42, '2019_07_30_040905_create_channels_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (43, '2019_07_30_071633_create_channel_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (44, '2019_08_10_175251_streamline_provinces_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (45, '2019_12_14_000001_create_personal_access_tokens_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (46, '2019_12_17_093757_create_payment_methods_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (47, '2019_12_17_094730_create_payments_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (48, '2020_05_24_204911_fix_accidental_taxa_named_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (49, '2020_10_02_230537_upgrade_media_table_to_v8', 1);
INSERT INTO migrations (id, migration, batch) VALUES (50, '2020_10_25_101244_update_permissions_to_appshell_v2', 1);
INSERT INTO migrations (id, migration, batch) VALUES (51, '2020_12_08_150233_upgrade_media_table_to_v9', 1);
INSERT INTO migrations (id, migration, batch) VALUES (52, '2020_12_08_162243_add_payment_method_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (53, '2020_12_18_140413_create_invitations_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (54, '2020_12_19_013824_add_invitation_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (55, '2020_12_29_124643_add_unique_index_to_order_numbers', 1);
INSERT INTO migrations (id, migration, batch) VALUES (56, '2021_02_28_161404_add_status_message_to_payments_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (57, '2021_03_21_102944_create_payment_history_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (58, '2021_05_20_174749_add_remote_id_to_payments_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (59, '2021_05_27_113135_create_adjustments_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (60, '2022_02_11_181838_create_link_types_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (61, '2022_02_16_092027_create_link_group_tables', 1);
INSERT INTO migrations (id, migration, batch) VALUES (62, '2022_02_28_160230_add_original_price_field_to_products_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (63, '2022_02_28_163548_add_dimensions_to_products_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (64, '2022_02_28_220149_create_carriers_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (65, '2022_02_28_221239_add_carrier_id_to_shipments_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (66, '2022_03_12_165912_add_customer_id_to_users_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (67, '2022_03_15_170852_extend_customers_table_with_ltv_currency_and_timezone', 1);
INSERT INTO migrations (id, migration, batch) VALUES (68, '2022_03_26_144125_create_shipping_methods_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (69, '2022_06_13_090450_create_master_products_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (70, '2022_06_13_090835_create_master_product_variants_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (71, '2022_07_05_154855_add_channel_id_to_orders_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (72, '2022_11_09_141850_add_active_flag_to_shipping_methods_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (73, '2023_01_12_123641_add_cart_item_configuration', 1);
INSERT INTO migrations (id, migration, batch) VALUES (74, '2023_01_19_121154_add_order_item_configuration', 1);
INSERT INTO migrations (id, migration, batch) VALUES (75, '2023_01_25_114755_add_description_to_variants_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (76, '2023_01_25_133735_add_shipping_method_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (77, '2023_01_25_161641_add_carrier_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (78, '2023_02_20_094957_add_reference_number_to_shipments_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (79, '2023_02_20_104644_create_shippables_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (80, '2023_02_20_145123_add_fulfillment_status_to_orders', 1);
INSERT INTO migrations (id, migration, batch) VALUES (81, '2023_02_20_153027_add_fulfillment_status_to_order_items', 1);
INSERT INTO migrations (id, migration, batch) VALUES (82, '2023_02_22_180720_add_language_and_ordered_at_fields_to_the_orders_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (83, '2023_02_22_191444_add_shipping_method_and_customer_to_the_orders_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (84, '2023_02_26_090848_create_zone_tables', 1);
INSERT INTO migrations (id, migration, batch) VALUES (85, '2023_02_27_183045_add_zone_to_shipping_methods_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (86, '2023_03_06_203615_add_payable_remote_id_to_the_orders_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (87, '2023_03_06_205137_add_subtype_to_payments_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (88, '2023_03_10_110949_add_zone_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (89, '2023_03_12_093217_add_zones_foreign_key_to_shipping_methods_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (90, '2023_03_17_150427_create_tax_categories_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (91, '2023_03_25_201501_add_tax_category_id_to_products', 1);
INSERT INTO migrations (id, migration, batch) VALUES (92, '2023_03_26_085056_create_tax_rates_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (93, '2023_03_28_195634_add_extend_the_shipments_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (94, '2023_04_08_104809_create_languages_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (95, '2023_06_07_125654_extend_the_addresses_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (96, '2023_06_15_174343_add_model_to_the_addresses_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (97, '2023_06_15_215212_migrate_customer_addresses_for_v3', 1);
INSERT INTO migrations (id, migration, batch) VALUES (98, '2023_07_10_115351_add_currency_field_to_the_orders_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (99, '2023_07_10_145614_add_currency_to_the_channels_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (100, '2023_08_23_155708_add_hidden_field_to_properties', 1);
INSERT INTO migrations (id, migration, batch) VALUES (101, '2023_08_31_182424_add_channelables_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (102, '2023_10_04_230611_add_payment_method_to_orders_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (103, '2023_10_18_173544_add_default_address_fields_to_the_customer_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (104, '2023_11_23_091238_add_backorder_to_products_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (105, '2023_11_23_152437_add_backorder_to_master_product_variants_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (106, '2023_12_08_100000_create_tw_client_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (107, '2023_12_11_100000_create_tw_yunohost_instances_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (108, '2023_12_14_153118_add_permissions_to_tw_yunohost_applications_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (109, '2023_12_18_164652_add_tw_yunohost_servers_id_to_tw_yunohost_applications', 1);
INSERT INTO migrations (id, migration, batch) VALUES (110, '2023_12_19_140022_add_tw_yunohost_permissions_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (111, '2023_12_20_131928_create_jobs_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (112, '2023_12_20_180100_cleanup_yunohost_tables', 1);
INSERT INTO migrations (id, migration, batch) VALUES (113, '2023_12_21_155200_create_ssh_traces_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (114, '2023_12_21_155200_update_ssh_traces_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (115, '2023_12_22_221200_create_shadow_it_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (116, '2023_12_26_175900_update_users_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (117, '2023_12_27_161200_update_shadow_it_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (118, '2023_12_29_072239_create_failed_jobs_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (119, '2023_12_29_094039_rename_clients_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (120, '2023_12_29_153622_add_tw_tenants_media_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (121, '2024_01_15_142053_add_yunohost_servers_and_apps_id_to_tw_yunohost_ssh_traces_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (122, '2024_01_18_144153_add_yunohost_shadow_it_to_tw_yunohost_ssh_traces_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (123, '2024_01_22_213653_longer_trace_in_table_ssh_traces_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (124, '2024_01_23_165122_create_ynh_servers_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (125, '2024_01_23_165132_create_ynh_users_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (126, '2024_01_23_165142_create_ynh_domains_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (127, '2024_01_23_165150_create_ynh_applications_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (128, '2024_01_23_170737_create_ynh_permissions_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (129, '2024_01_24_151222_create_is_ready_column_in_ynh_servers_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (130, '2024_01_24_164222_create_ynh_ssh_traces_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (131, '2024_01_24_202432_create_ynh_orders', 1);
INSERT INTO migrations (id, migration, batch) VALUES (132, '2024_01_25_084322_create_ynh_order_id_column_in_ynh_servers_and_ynh_applications_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (133, '2024_01_25_200722_drop_columns_client_id_and_customer_id_from_ynh_servers_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (134, '2024_01_25_222522_update_column_ynh_server_id_on_ynh_ssh_traces_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (135, '2024_01_26_103355_extend_channels_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (136, '2024_01_27_190822_drop_tw_tables', 1);
INSERT INTO migrations (id, migration, batch) VALUES (137, '2024_01_27_190822_make_it_tenant_aware', 1);
INSERT INTO migrations (id, migration, batch) VALUES (138, '2024_02_01_115237_set_on_delete_on_tables_ynh', 1);
INSERT INTO migrations (id, migration, batch) VALUES (139, '2024_02_09_144402_add_type_to_tax_categories_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (140, '2024_02_21_162437_create_table_ynh_osquery', 1);
INSERT INTO migrations (id, migration, batch) VALUES (141, '2024_02_22_105724_add_tax_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (142, '2024_03_04_110737_update_table_ynh_server', 1);
INSERT INTO migrations (id, migration, batch) VALUES (143, '2024_03_05_161037_index_columns_in_ynh_tables', 1);
INSERT INTO migrations (id, migration, batch) VALUES (144, '2024_03_13_103700_index_columns_in_ynh_tables2', 1);
INSERT INTO migrations (id, migration, batch) VALUES (145, '2024_03_31_162637_create_table_ynh_backups', 1);
INSERT INTO migrations (id, migration, batch) VALUES (146, '2024_04_04_123653_convert_channel_billing_and_shipping_countries_to_zones', 1);
INSERT INTO migrations (id, migration, batch) VALUES (147, '2024_04_10_200341_add_zone_to_payment_methods_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (148, '2024_05_03_182837_create_table_ynh_nginx_logs', 1);
INSERT INTO migrations (id, migration, batch) VALUES (149, '2024_05_06_182837_add_column_ip_address_v6_to_table_ynh_servers', 1);
INSERT INTO migrations (id, migration, batch) VALUES (150, '2024_05_15_111702_create_media_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (151, '2024_05_25_1601702_add_column_is_frozen_to_ynh_servers', 1);
INSERT INTO migrations (id, migration, batch) VALUES (152, '2024_05_31_074502_add_root_item_to_link_group_items_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (153, '2024_06_07_083226_add_content_fields_to_taxons_table', 1);
INSERT INTO migrations (id, migration, batch) VALUES (154, '2024_07_10_101400_add_columns_is_visitors_and_is_all_users_to_ynh_permissions', 1);
INSERT INTO migrations (id, migration, batch) VALUES (155, '2024_08_06_172120_add_column_packed_to_table_ynh_osquery', 1);
INSERT INTO migrations (id, migration, batch) VALUES (156, '2024_08_06_172137_create_table_disk_usage', 1);
INSERT INTO migrations (id, migration, batch) VALUES (157, '2024_08_06_172137_create_table_memory_usage', 1);
INSERT INTO migrations (id, migration, batch) VALUES (158, '2024_08_11_110315_rename_tables_disk_and_memory_usage', 1);
INSERT INTO migrations (id, migration, batch) VALUES (159, '2024_08_12_165202_add_column_added_with_curl_to_ynh_servers', 1);
INSERT INTO migrations (id, migration, batch) VALUES (160, '2024_08_14_165202_create_table_ynh_cybernews', 1);
INSERT INTO migrations (id, migration, batch) VALUES (161, '2024_08_16_161600_index_columns_updated_at', 1);
INSERT INTO migrations (id, migration, batch) VALUES (162, '2024_08_19_103002_create_table_ynh_osquery_rules', 1);
INSERT INTO migrations (id, migration, batch) VALUES (163, '2024_08_26_091658_create_notifications_table', 2);
INSERT INTO migrations (id, migration, batch) VALUES (164, '2024_08_26_134402_add_column_category_to_table_ynh_osquery_rules', 3);
INSERT INTO migrations (id, migration, batch) VALUES (165, '2024_08_29_000000_create_assets_table', 4);
INSERT INTO migrations (id, migration, batch) VALUES (166, '2024_08_30_123600_fixup_tables', 4);
INSERT INTO migrations (id, migration, batch) VALUES (167, '2024_08_30_161200_fixup_tables2', 4);
INSERT INTO migrations (id, migration, batch) VALUES (168, '2024_08_30_180700_fixup_tables3', 4);
INSERT INTO migrations (id, migration, batch) VALUES (169, '2024_09_02_210000_fixup_tables4', 4);
INSERT INTO migrations (id, migration, batch) VALUES (170, '2024_09_03_121900_fixup_tables5', 4);
INSERT INTO migrations (id, migration, batch) VALUES (171, '2024_09_04_170900_create_honeypots_tables', 4);
INSERT INTO migrations (id, migration, batch) VALUES (172, '2024_09_05_145500_fixup_tables6', 4);
INSERT INTO migrations (id, migration, batch) VALUES (173, '2024_09_06_154400_create_assets_tags_hashes_tables', 4);
INSERT INTO migrations (id, migration, batch) VALUES (174, '2024_09_06_164300_fixup_tables7', 4);
INSERT INTO migrations (id, migration, batch) VALUES (175, '2024_09_08_102900_fixup_tables8', 4);
INSERT INTO migrations (id, migration, batch) VALUES (176, '2024_09_08_120600_create_screenshots_table', 4);
INSERT INTO migrations (id, migration, batch) VALUES (177, '2024_09_08_132400_fixup_tables9', 4);
INSERT INTO migrations (id, migration, batch) VALUES (178, '2024_09_08_150400_fixup_tables10', 4);
INSERT INTO migrations (id, migration, batch) VALUES (179, '2024_09_10_084900_fixup_tables11', 4);
INSERT INTO migrations (id, migration, batch) VALUES (180, '2024_09_10_090600_fixup_tables12', 4);
INSERT INTO migrations (id, migration, batch) VALUES (181, '2024_09_10_174900_fixup_tables13', 4);
INSERT INTO migrations (id, migration, batch) VALUES (182, '2024_09_11_183000_fixup_tables14', 4);
INSERT INTO migrations (id, migration, batch) VALUES (183, '2024_09_16_175400_fixup_tables15', 5);
INSERT INTO migrations (id, migration, batch) VALUES (184, '2018_01_01_000001_package_sinevia_cms_tables_create', 6);
INSERT INTO migrations (id, migration, batch) VALUES (185, '2018_01_13_000001_sinevia_cms_table_version_create', 6);
INSERT INTO migrations (id, migration, batch) VALUES (186, '2018_06_18_000001_sinevia_cms_tables_translation_create', 6);
INSERT INTO migrations (id, migration, batch) VALUES (187, '2021_09_04_000001_sinevia_cms_tables_menu_create', 6);
INSERT INTO migrations (id, migration, batch) VALUES (195, '2024_09_24_165200_create_chunks_table', 7);
INSERT INTO migrations (id, migration, batch) VALUES (196, '2024_09_24_212100_create_prompts_table', 8);
INSERT INTO migrations (id, migration, batch) VALUES (197, '2024_09_25_174100_increase_column_hyperlink_size_tcb_table', 9);
INSERT INTO migrations (id, migration, batch) VALUES (198, '2024_09_25_183800_add_fr_columns_in_tcb_table', 10);
INSERT INTO migrations (id, migration, batch) VALUES (199, '2024_09_25_183800_add_terms_accepted_column_in_users_table', 11);
INSERT INTO migrations (id, migration, batch) VALUES (200, '2024_09_27_094700_add_se_api_token_column_in_users_table', 12);
INSERT INTO migrations (id, migration, batch) VALUES (201, '2024_09_29_140500_create_ynh_summaries_table', 13);
INSERT INTO migrations (id, migration, batch) VALUES (202, '2024_09_29_151600_update_ynh_summaries_table', 14);
INSERT INTO migrations (id, migration, batch) VALUES (204, '2024_09_29_154100_rename_table_the_cyber_brief', 15);
INSERT INTO migrations (id, migration, batch) VALUES (205, '2024_09_29_175600_update_ynh_summaries_with_vulns_table', 16);
INSERT INTO migrations (id, migration, batch) VALUES (206, '2024_09_29_181000_update_ynh_summaries_with_servers_table', 17);
INSERT INTO migrations (id, migration, batch) VALUES (207, '2024_09_29_181900_rename_table_ynh_summaries', 18);
INSERT INTO migrations (id, migration, batch) VALUES (208, '2024_09_29_184300_rename_column_servers_monitored_in_table_ynh_overview', 19);
INSERT INTO migrations (id, migration, batch) VALUES (209, '2024_09_30_121900_index_column_level_in_table_am_alerts', 20);
INSERT INTO migrations (id, migration, batch) VALUES (215, '2024_10_03_142700_create_files_table', 21);
INSERT INTO migrations (id, migration, batch) VALUES (216, '2024_10_07_104300_rename_table_cb_chunks_collections_to_cb_collections', 22);
INSERT INTO migrations (id, migration, batch) VALUES (217, '2024_10_08_104500_index_column_timestamp_in_ynh_osquery', 23);
INSERT INTO migrations (id, migration, batch) VALUES (228, '2024_10_09_203200_index_column_ip_in_am_ports', 24);
INSERT INTO migrations (id, migration, batch) VALUES (229, '2024_10_19_164713_create_stripes_table', 24);
INSERT INTO migrations (id, migration, batch) VALUES (230, '2019_05_03_000001_create_customer_columns', 25);
INSERT INTO migrations (id, migration, batch) VALUES (231, '2019_05_03_000002_create_subscriptions_table', 25);
INSERT INTO migrations (id, migration, batch) VALUES (232, '2019_05_03_000003_create_subscription_items_table', 25);
INSERT INTO migrations (id, migration, batch) VALUES (233, '2024_10_21_095800_add_column_stripe_tx_id_to_users', 26);
INSERT INTO migrations (id, migration, batch) VALUES (234, '2024_10_21_203000_add_column_superset_id_to_users', 27);
INSERT INTO migrations (id, migration, batch) VALUES (236, '2024_10_22_110600_create_table_ynh_osquery_processor_usage', 28);
INSERT INTO migrations (id, migration, batch) VALUES (240, '2024_10_23_111700_drop_constraint_on_table_am_alerts', 29);
INSERT INTO migrations (id, migration, batch) VALUES (241, '2024_10_23_144200_add_column_enabled_to_table_ynh_osquery_rules', 29);
INSERT INTO migrations (id, migration, batch) VALUES (246, '2024_10_27_184400_create_table_ynh_cves', 30);
INSERT INTO migrations (id, migration, batch) VALUES (247, '2024_10_27_210500_create_table_ynh_osquery_packages', 30);
INSERT INTO migrations (id, migration, batch) VALUES (251, '2024_10_30_154200_add_column_dismissed_to_table_ynh_osquery', 31);
INSERT INTO migrations (id, migration, batch) VALUES (253, '2024_11_07_162100_set_constraint_on_prompts', 32);
INSERT INTO migrations (id, migration, batch) VALUES (254, '2024_11_08_143700_create_column_cve_id_on_table_ynh_packages', 33);
INSERT INTO migrations (id, migration, batch) VALUES (255, '2024_11_13_092900_add_column_is_embedded_to_table_files', 34);
INSERT INTO migrations (id, migration, batch) VALUES (263, '2024_11_17_125900_create_table_csv_collections', 35);
INSERT INTO migrations (id, migration, batch) VALUES (264, '2024_11_17_135900_create_table_csv_files', 35);
INSERT INTO migrations (id, migration, batch) VALUES (265, '2024_11_17_140200_create_table_csv_rows', 35);
INSERT INTO migrations (id, migration, batch) VALUES (267, '2024_11_20_051700_create_table_cb_templates', 36);
INSERT INTO migrations (id, migration, batch) VALUES (270, '2024_11_20_201100_create_table_cb_conversations', 37);
INSERT INTO migrations (id, migration, batch) VALUES (273, '2024_11_24_212400_set_constraint_on_collections', 38);
INSERT INTO migrations (id, migration, batch) VALUES (274, '2024_11_26_090800_add_column_priority_to_table_collections', 39);
INSERT INTO migrations (id, migration, batch) VALUES (279, '2024_11_28_190500_add_column_uid_to_table_osquery', 40);
INSERT INTO migrations (id, migration, batch) VALUES (280, '2024_11_29_034200_update_column_png_in_table_screenshots', 41);
INSERT INTO migrations (id, migration, batch) VALUES (281, '2024_11_29_112000_create_index_column_uid_to_table_osquery', 42);
INSERT INTO migrations (id, migration, batch) VALUES (285, '2024_12_01_195600_add_column_is_ioc_to_table_osquery_rules', 43);
INSERT INTO migrations (id, migration, batch) VALUES (288, '2024_12_01_205400_create_table_ynh_mitre_attck', 44);
INSERT INTO migrations (id, migration, batch) VALUES (290, '2024_12_01_223400_create_table_ynh_iocs', 45);
INSERT INTO migrations (id, migration, batch) VALUES (292, '2024_12_02_093500_add_column_scores_to_table_iocs', 46);
INSERT INTO migrations (id, migration, batch) VALUES (293, '2024_12_02_110900_add_column_is_anomaly_to_table_iocs', 47);
INSERT INTO migrations (id, migration, batch) VALUES (294, '2024_12_02_151300_drop_column_product_from_table_iocs', 48);
INSERT INTO migrations (id, migration, batch) VALUES (295, '2024_12_03_152938_create_platform_column_in_ynh_servers_table', 49);
INSERT INTO migrations (id, migration, batch) VALUES (296, '2024_12_06_155250_add_columns_for_performa_to_table_users', 50);
INSERT INTO migrations (id, migration, batch) VALUES (317, '2024_12_18_172150_drop_tables_xxx_usage', 51);
INSERT INTO migrations (id, migration, batch) VALUES (318, '2024_12_29_182000_create_table_ynh_ossec', 51);
INSERT INTO migrations (id, migration, batch) VALUES (320, '2024_12_30_164300_index_table_ynh_ossec', 52);
INSERT INTO migrations (id, migration, batch) VALUES (321, '2024_12_31_101200_add_column_rule_to_table_ynh_ossec', 53);
INSERT INTO migrations (id, migration, batch) VALUES (322, '2025_01_03_145000_create_table_ynh_osquery_latest_events', 54);
INSERT INTO migrations (id, migration, batch) VALUES (323, '2025_01_03_153400_add_column_updated_to_table_ynh_osquery_latest_events', 55);
INSERT INTO migrations (id, migration, batch) VALUES (324, '2025_01_04_100500_drop_table_compute_ioc', 56);
INSERT INTO migrations (id, migration, batch) VALUES (327, '2025_01_05_184500_create_table_ynh_osquery_events_counts', 57);
INSERT INTO migrations (id, migration, batch) VALUES (328, '2025_01_10_022400_add_column_gets_audit_report_to_table_users', 58);
INSERT INTO migrations (id, migration, batch) VALUES (333, '2025_01_13_160500_create_table_ynh_frameworks', 59);
INSERT INTO migrations (id, migration, batch) VALUES (337, '2025_01_14_134500_increase_column_rule_length_in_table_ynh_ossec_checks', 60);
INSERT INTO migrations (id, migration, batch) VALUES (338, '2025_01_21_155200_add_column_autosaved_to_table_conversations', 61);
INSERT INTO migrations (id, migration, batch) VALUES (383, '2025_01_24_105900_create_view_packages', 62);
INSERT INTO migrations (id, migration, batch) VALUES (384, '2025_01_24_110900_create_view_etc_hosts', 62);
INSERT INTO migrations (id, migration, batch) VALUES (385, '2025_01_24_111000_create_view_etc_services', 62);
INSERT INTO migrations (id, migration, batch) VALUES (386, '2025_01_24_111600_create_view_shell_history', 62);
INSERT INTO migrations (id, migration, batch) VALUES (387, '2025_01_24_111900_create_view_user_ssh_keys', 62);
INSERT INTO migrations (id, migration, batch) VALUES (388, '2025_01_24_112100_create_view_authorized_keys', 62);
INSERT INTO migrations (id, migration, batch) VALUES (389, '2025_01_24_112400_create_view_logins_and_logouts', 62);
INSERT INTO migrations (id, migration, batch) VALUES (390, '2025_01_24_112600_create_view_scheduled_tasks', 62);
INSERT INTO migrations (id, migration, batch) VALUES (391, '2025_01_24_112800_create_view_services', 62);
INSERT INTO migrations (id, migration, batch) VALUES (392, '2025_01_24_113000_create_view_user_accounts', 62);
INSERT INTO migrations (id, migration, batch) VALUES (393, '2025_01_24_113300_create_view_groups', 62);
INSERT INTO migrations (id, migration, batch) VALUES (394, '2025_01_24_144900_create_view_network_interfaces', 62);
INSERT INTO migrations (id, migration, batch) VALUES (395, '2025_01_24_145100_create_view_startup_items', 62);
INSERT INTO migrations (id, migration, batch) VALUES (396, '2025_01_24_145600_create_view_processes', 62);
INSERT INTO migrations (id, migration, batch) VALUES (397, '2025_01_24_145800_create_view_processes_with_open_network_sockets', 62);
INSERT INTO migrations (id, migration, batch) VALUES (398, '2025_01_24_150000_create_view_processes_with_bound_network_sockets', 62);
